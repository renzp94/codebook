import{S as t,i as s,s as e,k as o,e as n,t as r,n as a,c as l,a as i,g as c,d as u,b as h,f,D as d,h as v,F as m,z as $,L as p,j as k,m as g,o as x,v as b,r as w,w as y,K as E,M as j,u as B,B as _,O as D}from"../chunks/vendor-d00531f1.js";function q(t){let s,e,$,p,k,g,x,b;return{c(){s=o(),e=n("a"),$=n("h1"),p=r(t[0]),k=o(),g=n("h5"),x=r("By @ "),b=r(t[1]),this.h()},l(o){s=a(o),e=l(o,"A",{class:!0,style:!0,href:!0});var n=i(e);$=l(n,"H1",{class:!0});var r=i($);p=c(r,t[0]),r.forEach(u),k=a(n),g=l(n,"H5",{class:!0});var h=i(g);x=c(h,"By @ "),b=c(h,t[1]),h.forEach(u),n.forEach(u),this.h()},h(){h($,"class","title svelte-1q5ewvx"),h(g,"class","author svelte-1q5ewvx"),h(e,"class","book svelte-1q5ewvx"),h(e,"style",t[4]),h(e,"href",t[2])},m(o,n){f(o,s,n),f(o,e,n),d(e,$),d($,p),d(e,k),d(e,g),d(g,x),d(g,b),t[5](e)},p(t,[s]){1&s&&v(p,t[0]),2&s&&v(b,t[1]),16&s&&h(e,"style",t[4]),4&s&&h(e,"href",t[2])},i:m,o:m,d(o){o&&u(s),o&&u(e),t[5](null)}}}function C(t,s,e){let o,n,{title:r}=s,{author:a="CodeBook"}=s,{url:l}=s;return $((function(){const t=o.clientWidth/(18.4/26);e(4,n=`height: ${t}px`)})),t.$$set=t=>{"title"in t&&e(0,r=t.title),"author"in t&&e(1,a=t.author),"url"in t&&e(2,l=t.url)},[r,a,l,o,n,function(t){p[t?"unshift":"push"]((()=>{o=t,e(3,o)}))}]}class I extends t{constructor(t){super(),s(this,t,C,q,e,{title:0,author:1,url:2})}}function V(t,s,e){const o=t.slice();return o[1]=s[e],o[3]=e,o}function H(t,s){let e,r,c,v;return r=new I({props:{title:s[1],url:`/book/${s[1]}`}}),{key:t,first:null,c(){e=n("div"),k(r.$$.fragment),c=o(),this.h()},l(t){e=l(t,"DIV",{class:!0});var s=i(e);g(r.$$.fragment,s),c=a(s),s.forEach(u),this.h()},h(){h(e,"class","book__item"),this.first=e},m(t,s){f(t,e,s),x(r,e,null),d(e,c),v=!0},p(t,e){s=t;const o={};1&e&&(o.title=s[1]),1&e&&(o.url=`/book/${s[1]}`),r.$set(o)},i(t){v||(b(r.$$.fragment,t),v=!0)},o(t){w(r.$$.fragment,t),v=!1},d(t){t&&u(e),y(r)}}}function M(t){let s,e,r,c,v=[],m=new Map,$=t[0];const p=t=>`${t[1]}_${t[3]}`;for(let o=0;o<$.length;o+=1){let s=V(t,$,o),e=p(s);m.set(e,v[o]=H(e,s))}return{c(){s=o(),e=n("div"),r=n("div");for(let t=0;t<v.length;t+=1)v[t].c();this.h()},l(t){E('[data-svelte="svelte-1wmm27v"]',document.head).forEach(u),s=a(t),e=l(t,"DIV",{class:!0});var o=i(e);r=l(o,"DIV",{class:!0});var n=i(r);for(let s=0;s<v.length;s+=1)v[s].l(n);n.forEach(u),o.forEach(u),this.h()},h(){document.title="CodeBook | 有质感的编程",h(r,"class","book__list svelte-cm60r9"),h(e,"class","home svelte-cm60r9")},m(t,o){f(t,s,o),f(t,e,o),d(e,r);for(let s=0;s<v.length;s+=1)v[s].m(r,null);c=!0},p(t,[s]){1&s&&($=t[0],_(),v=j(v,s,p,1,t,$,m,r,D,H,null,V),B())},i(t){if(!c){for(let t=0;t<$.length;t+=1)b(v[t]);c=!0}},o(t){for(let s=0;s<v.length;s+=1)w(v[s]);c=!1},d(t){t&&u(s),t&&u(e);for(let s=0;s<v.length;s+=1)v[s].d()}}}var z=function(t,s,e,o){return new(e||(e=Promise))((function(n,r){function a(t){try{i(o.next(t))}catch(s){r(s)}}function l(t){try{i(o.throw(t))}catch(s){r(s)}}function i(t){var s;t.done?n(t.value):(s=t.value,s instanceof e?s:new e((function(t){t(s)}))).then(a,l)}i((o=o.apply(t,s||[])).next())}))};function A({fetch:t}){return z(this,void 0,void 0,(function*(){const s=yield t("index.json");if(s.ok){return{props:{books:yield s.json()}}}return{status:s.status,error:new Error("Could not load index.json")}}))}function F(t,s,e){let{books:o}=s;return t.$$set=t=>{"books"in t&&e(0,o=t.books)},[o]}export default class extends t{constructor(t){super(),s(this,t,F,M,e,{books:0})}}export{A as load};
