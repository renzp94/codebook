<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#333333" />
		<link rel="stylesheet" href="/assets/styles/global.css" />
		<title>从Vue2迁移Vue3的全攻略</title>

		

		<link rel="modulepreload" href="/./_app/start-97f7b82c.js">
		<link rel="modulepreload" href="/./_app/chunks/vendor-d00531f1.js">
		<link rel="modulepreload" href="/./_app/pages/__layout.svelte-b0488dc3.js">
		<link rel="modulepreload" href="/./_app/pages/article/__layout.svelte-9a26e2ca.js">
		<link rel="modulepreload" href="/./_app/pages/article/[category]/[id].svelte-35c0c78b.js">
		<link rel="modulepreload" href="/./_app/chunks/utils-a81d5505.js">
		<link rel="stylesheet" href="/./_app/assets/start-a8cd1609.css">
		<link rel="stylesheet" href="/./_app/assets/pages/__layout.svelte-dfbf40bb.css">
		<link rel="stylesheet" href="/./_app/assets/pages/article/__layout.svelte-1448dd73.css">
		<link rel="stylesheet" href="/./_app/assets/pages/article/[category]/[id].svelte-7f79f039.css">

		<script type="module">
			import { start } from "/./_app/start-97f7b82c.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":"/."},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/./_app/pages/__layout.svelte-b0488dc3.js"),
						import("/./_app/pages/article/__layout.svelte-9a26e2ca.js"),
						import("/./_app/pages/article/[category]/[id].svelte-35c0c78b.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "/article/vue/20210605160206",
						query: new URLSearchParams(""),
						params: {"category":"vue","id":"20210605160206"}
					}
				}
			});
		</script>
	</head>
	<body>
		<div id="svelte">



<section class="svelte-jbk32v"><header class="svelte-jbk32v"><a href="/"><img class="logo svelte-jbk32v" src="/assets/images/logo.png" alt="code book logo"></a>
<a class="github svelte-jbk32v" href="https://github.com/renzp94" target="_blank"><i class="iconfont icon-github svelte-jbk32v"></i></a></header>
	<main><section><main class="svelte-1fbldbu">

<section class="md"><h1 class="title">从Vue2迁移Vue3的全攻略</h1>
  <div class="info svelte-1vg5uky"><div class="author svelte-1vg5uky">作者：renzp94</div>
    <div class="time">时间：2021-06-05 16:03:16</div></div>

  <div class="md-content"><p>从<code>Vue3 alpha</code>(2019.12.21)发布开始，开始关注<code>Vue3</code>，并通过<code>@vue/composition-api</code>包在 Vue2 的练习项目使用，到后来的<code>Vue3 beta</code>(2020.4.17)发布，直接使用<code>Vue3 beta</code>版本再次尝试，再到后来的<code>Vue3 rc</code>(2020.7.18)，以及最后终于在<code>2020.9.18</code>发布了正式版，这一路学着不断变更的 api，经常过一段时间发现之前的 api 变了，直到<code>Vue3</code>的生态稳定之后又开始尝试，发现真香。
<br />
其实，最好的学习文章应该是<a href="https://v3.cn.vuejs.org/">官方文档</a>，不得不说<code>VUE</code>的文档是真的不错，在 Vue3 官网上也有<a href="https://v3.cn.vuejs.org/guide/migration/introduction.html">Vue3 迁移指南</a>。所以，如果需要认真的了解全部的 Vue3 内容建议去官网学习，此文章只会针对性的说明一些我在实际开发中遇到的变更。</p>
<h2 id="组合式-api">组合式 API</h2>
<p>Vue3 重大更新就是<code>组合式API(Composition Api)</code>了，接下来就一一说明一下。</p>
<h3 id="生命周期">生命周期</h3>
<table>
<thead>
<tr>
<th>选项式</th>
<th>Hook inside setup</th>
</tr>
</thead>
<tbody><tr>
<td>beforeCreate</td>
<td>setup</td>
</tr>
<tr>
<td>created</td>
<td>setup</td>
</tr>
<tr>
<td>beforeMount</td>
<td>onBeforeMount</td>
</tr>
<tr>
<td>mounted</td>
<td>onMounted</td>
</tr>
<tr>
<td>beforeUpdate</td>
<td>onBeforeUpdate</td>
</tr>
<tr>
<td>updated</td>
<td>onUpdated</td>
</tr>
<tr>
<td>beforeUnmount</td>
<td>onBeforeUnmount</td>
</tr>
<tr>
<td>unmounted</td>
<td>onUnmounted</td>
</tr>
<tr>
<td>errorCaptured</td>
<td>onErrorCaptured</td>
</tr>
<tr>
<td>renderTracked</td>
<td>onRenderTracked</td>
</tr>
<tr>
<td>renderTriggered</td>
<td>onRenderTriggered</td>
</tr>
<tr>
<td>activated</td>
<td>onActivated</td>
</tr>
<tr>
<td>deactivated</td>
<td>onDeactivated</td>
</tr>
</tbody></table>
<h3 id="setup">setup</h3>
<p>一个组件选项，在创建组件之前执行，一旦 props 被解析，并作为组合式 API 的入口点</p>
<p><code>setup</code>函数有两个参数: <code>props</code>和<code>ctx</code>,其中 ctx 是一个对象(<code>{attrs,slots,emit}</code>).</p>
<ul>
<li>attrs: 绑定在组件中的所有<code>显示指定</code>的<code>props</code>,这里需要特别注意的是在<code>Vue3</code>中如果需要将属性绑定到组件根节点需要声明<code>props</code>,对应<code>Vue2</code>的<code>this.$attrs</code></li>
<li>slots: 插槽列表,对应<code>Vue2</code>中的<code>this.$slots</code></li>
<li>emit: 触发事件,对应<code>Vue2</code>中的<code>this.$emit</code>,若组件内需要触发事件，需要在<code>emtis</code>选项中配置或者在使用<code>defineEmit</code>时指定。</li>
</ul>
<p>在<code>setup</code>函数中定义的变量或函数，如果需要在<code>template</code>中使用的话需要在<code>setup</code>函数中返回，不返回的无法在<code>template</code>中使用。这样写会有一些繁琐，所以<code>Vue3</code>提出了一个新想法: <code>script setup</code>。在<code>script</code>标签上标注为<code>setup</code>则不需要返回定义的变量和函数就可以在<code>template</code>中使用。</p>
<p><code>Count.vue</code></p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">count</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$emit(&#x27;sub&#x27;)&quot;</span>&gt;</span>-1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$emit(&#x27;add&#x27;)&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { defineComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> defineComponent({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Count&#x27;</span>,
    <span class="hljs-attr">props</span>: {
        <span class="hljs-attr">count</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-built_in">Number</span>,
            <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>
        }
    },
    <span class="hljs-attr">emits</span>: [<span class="hljs-string">&#x27;sub&#x27;</span>, <span class="hljs-string">&#x27;add&#x27;</span>]
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><code>App.vue</code></p>
<pre><code class="language-vue"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">count</span> <span class="hljs-attr">:count</span>=<span class="hljs-string">&quot;count&quot;</span> @<span class="hljs-attr">add</span>=<span class="hljs-string">&quot;onAdd&quot;</span> @<span class="hljs-attr">sub</span>=<span class="hljs-string">&quot;onSub&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { defineComponent, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;
<span class="hljs-keyword">import</span> Count <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Count.vue&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> defineComponent({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;App&#x27;</span>,
    <span class="hljs-attr">components</span>: { Count },
    <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> {
        <span class="hljs-keyword">const</span> count = ref(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> onAdd = <span class="hljs-function">() =&gt;</span> count.value++;
        <span class="hljs-keyword">const</span> onSub = <span class="hljs-function">() =&gt;</span> count.value--;

        <span class="hljs-keyword">return</span> {
            count,
            onAdd,
            onSub
        };
    }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>如果使用<code>script setup</code>，则是下面的代码</p>
<p><code>Count.vue</code></p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ count }</span><span class="xml">}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$emit(&#x27;sub&#x27;)&quot;</span>&gt;</span>-1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$emit(&#x27;add&#x27;)&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">{ defineComponent, defineEmit, defineProps }</span><span class="xml"><span class="javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

defineComponent(</span></span><span class="hljs-template-variable">{
    name: &#x27;Count&#x27;
}</span><span class="xml">);
defineProps(</span><span class="hljs-template-variable">{
    count: {
        type: Number,
        <span class="hljs-keyword">default</span>: 0
    }</span><span class="xml"><span class="javascript">
});
defineEmit([<span class="hljs-string">&#x27;sub&#x27;</span>, <span class="hljs-string">&#x27;add&#x27;</span>]);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><code>App.vue</code></p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">count</span> <span class="hljs-attr">:count</span>=<span class="hljs-string">&quot;count&quot;</span> @<span class="hljs-attr">add</span>=<span class="hljs-string">&quot;onAdd&quot;</span> @<span class="hljs-attr">sub</span>=<span class="hljs-string">&quot;onSub&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">{ ref }</span><span class="xml"><span class="javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;
<span class="hljs-keyword">import</span> Count <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Count.vue&#x27;</span>;

<span class="hljs-keyword">const</span> count = ref(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> onAdd = <span class="hljs-function">() =&gt;</span> count.value++;
<span class="hljs-keyword">const</span> onSub = <span class="hljs-function">() =&gt;</span> count.value--;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<blockquote>
<p>注意：<code>script setup</code>目前<code>(Vue: ^3.0.5)</code>是<code>RFC</code>状态</p>
</blockquote>
<h3 id="ref">ref</h3>
<p>将一个基本类型的数据转换成响应式且可变的 ref 对象, 通过<code>.value</code>属性修改和获取值.</p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">count</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onAdd&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">const</span> count = ref(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> onAdd = <span class="hljs-function">() =&gt;</span> count.value++;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>在<code>script</code>中,需要使用<code>.value</code>,但是在<code>template</code>中不再需要,Vue 会自动解开,如果觉得<code>script</code>中的<code>.value</code>不顺眼,其实还有一个语法糖<code>ref:</code>,通过此语法糖可以不使用<code>.value</code>直接设置和获取值.</p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">count</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onAdd&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-attr">ref</span>: count = <span class="hljs-number">1</span>;
<span class="hljs-keyword">const</span> onAdd = <span class="hljs-function">() =&gt;</span> count++;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<blockquote>
<p>注意：<code>ref: </code>目前<code>(Vue: ^3.0.5)</code>是<code>RFC</code>状态,且只能在<code>SFC(单文件)</code>中使用</p>
</blockquote>
<h4 id="ref-的配套方法">ref 的配套方法</h4>
<h5 id="unref">unref</h5>
<p>如果参数是一个<code>ref</code>则返回内部值,如果不是则返回参数本身.即: <code>isRef(val) ? val.value : val</code>的语法糖</p>
<h5 id="toref">toRef</h5>
<p>将一个响应式的对象属性转为响应式的.</p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ count }</span><span class="xml">}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onAdd&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">{ reactive, toRef }</span><span class="xml"><span class="javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">const</span> state = reactive(</span></span><span class="hljs-template-variable">{
    count: 0
}</span><span class="xml"><span class="javascript">);

<span class="hljs-keyword">const</span> count = toRef(state, <span class="hljs-string">&#x27;count&#x27;</span>);
<span class="hljs-keyword">const</span> onAdd = <span class="hljs-function">() =&gt;</span> count.value++;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h5 id="torefs">toRefs</h5>
<p>将一个响应式的对象,转换成一个普通对象,并且将对象中的属性转换为<code>ref</code>对象.一般的,当想对一个<code>reactive</code>包装的响应式对象进行解构时,解构之后的变量将会失去响应式,此时可通过<code>toRefs</code>将对象转换然后再解构</p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ count }</span><span class="xml">}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onAdd&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">{ reactive, toRefs }</span><span class="xml"><span class="javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">const</span> state = reactive(</span></span><span class="hljs-template-variable">{
    count: 0,
    text: &#x27;hello&#x27;
}</span><span class="xml"><span class="javascript">);

<span class="hljs-keyword">const</span> </span></span><span class="hljs-template-variable">{ count }</span><span class="xml"><span class="javascript"> = toRefs(state);
<span class="hljs-keyword">const</span> onAdd = <span class="hljs-function">() =&gt;</span> count.value++;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h5 id="isref">isRef</h5>
<p>检查值是否为一个<code>ref</code>对象.</p>
<h5 id="customref">customRef</h5>
<p>创建一个自定义的 <code>ref</code>，并对其依赖项跟踪和更新触发进行显式控制。它需要一个工厂函数，该函数接收 <code>track</code> 和 <code>trigger</code> 函数作为参数，并且应该返回一个带有 <code>get</code> 和 <code>set</code> 的对象</p>
<h5 id="shallowref">shallowRef</h5>
<p>创建一个跟踪自身 .value 变化的 ref，但不会使其值也变成响应式的。即：改变<code>.value</code>是响应式的，但是<code>.value</code>本身不是响应式的</p>
<h5 id="triggerref">triggerRef</h5>
<p>手动执行与 <code>shallowRef</code> 关联的任何副作用。</p>
<h5 id="reactive">reactive</h5>
<p>返回对象的响应式副本。</p>
<pre><code class="language-vue"><span class="hljs-variable">&lt;template&gt;</span>
    <span class="hljs-variable">&lt;div&gt;</span>{{ <span class="hljs-keyword">state</span>.count }}&lt;/div&gt;
    <span class="hljs-variable">&lt;button @click=&quot;onAdd&quot;&gt;</span>+<span class="hljs-number">1</span>&lt;/button&gt;
&lt;/template&gt;

<span class="hljs-variable">&lt;script setup lang=&quot;ts&quot;&gt;</span>
import { reactive } <span class="hljs-keyword">from</span> &#x27;vue&#x27;;

<span class="hljs-keyword">const</span> <span class="hljs-keyword">state</span> = reactive({
    count: <span class="hljs-number">0</span>,
    text: &#x27;hello&#x27;,
    <span class="hljs-keyword">user</span>: {
        nickname: &#x27;codebook&#x27;
    }
});

<span class="hljs-keyword">const</span> <span class="hljs-keyword">on</span>Add = () =&gt; <span class="hljs-keyword">state</span>.count++;
&lt;/script&gt;
</code></pre>
<blockquote>
<p>注意：<code>reactive</code>包装的是深度响应式，即：<code>state.user.nickname</code>改变之后也会触发渲染。如果不想深度响应式可使用<code>shallowReactive</code></p>
</blockquote>
<h5 id="readonly">readonly</h5>
<p>接受一个对象 (响应式或纯对象) 或 <code>ref</code> 并返回原始对象的只读代理。只读代理是深层的：任何被访问的嵌套属性也是只读的。</p>
<pre><code class="language-vue"><span class="hljs-variable">&lt;template&gt;</span>
    <span class="hljs-variable">&lt;div&gt;</span>{{ <span class="hljs-keyword">state</span>.count }}&lt;/div&gt;
    <span class="hljs-variable">&lt;button @click=&quot;onAdd&quot;&gt;</span>+<span class="hljs-number">1</span>&lt;/button&gt;
&lt;/template&gt;

<span class="hljs-variable">&lt;script setup lang=&quot;ts&quot;&gt;</span>
import { reactive, readonly, watchEffect } <span class="hljs-keyword">from</span> &#x27;vue&#x27;;

<span class="hljs-keyword">const</span> <span class="hljs-keyword">state</span> = reactive({
    count: <span class="hljs-number">0</span>,
    text: &#x27;hello&#x27;
});

<span class="hljs-keyword">const</span> readonlyState = readonly(<span class="hljs-keyword">state</span>);

watchEffect(() =&gt; {
    console.<span class="hljs-keyword">log</span>(readonlyState.count);
});

// 触发watchEffect
<span class="hljs-keyword">state</span>.count++;

// 点击不会触发watchEffect，且会出现警告
<span class="hljs-keyword">const</span> <span class="hljs-keyword">on</span>Add = () =&gt; readonlyState.count++;
&lt;/script&gt;
</code></pre>
<h5 id="isproxy">isProxy</h5>
<p>检查对象是否是由 <code>reactive</code> 或 <code>readonly</code> 创建的 <code>proxy</code>。</p>
<h5 id="isreactive">isReactive</h5>
<p>检查对象是否是由 <code>reactive</code> 创建的响应式代理。</p>
<h5 id="isreadonly">isReadonly</h5>
<p>检查对象是否是由 <code>readonly</code> 创建的只读代理。</p>
<h5 id="toraw">toRaw</h5>
<p>返回 <code>reactive</code> 或 <code>readonly</code> 代理的原始对象。</p>
<h5 id="markraw">markRaw</h5>
<p>标记一个对象，使其永远不会转换为 <code>proxy</code>。返回对象本身。</p>
<h5 id="shallowreactive">shallowReactive</h5>
<p>创建一个响应式代理，它跟踪其自身 <code>property</code> 的响应性，但不执行嵌套对象的深层响应式转换 (暴露原始值)。</p>
<h5 id="shallowreadonly">shallowReadonly</h5>
<p>创建一个 <code>proxy</code>，使其自身的 <code>property</code> 为只读，但不执行嵌套对象的深度只读转换 (暴露原始值)。</p>
<h5 id="computed">computed</h5>
<p>如果传入的是一个函数，则此函数为<code>getter</code>函数，如果传入的是个对象，则<code>get</code>属性函数为<code>getter</code>，<code>set</code>属性函数为<code>setter</code></p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">msg</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">UpperMsg</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onChangeMsg&quot;</span>&gt;</span>改变Msg<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">const</span> msg = ref(<span class="hljs-string">&#x27;codebook&#x27;</span>);
<span class="hljs-keyword">const</span> UpperMsg = computed(<span class="hljs-function">() =&gt;</span> msg.value.toUpperCase());
<span class="hljs-keyword">const</span> onChangeMsg = <span class="hljs-function">() =&gt;</span> {
    msg.value = <span class="hljs-string">&#x27;renzp94&#x27;</span>;
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h5 id="watcheffect">watchEffect</h5>
<p>在响应式地跟踪其依赖项时立即运行一个函数，并在更改依赖项时重新运行它。其返回一个停止函数</p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">msg</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">UpperMsg</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onChangeMsg&quot;</span>&gt;</span>改变Msg<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed, ref, watchEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">const</span> msg = ref(<span class="hljs-string">&#x27;codebook&#x27;</span>);
<span class="hljs-keyword">const</span> UpperMsg = computed(<span class="hljs-function">() =&gt;</span> msg.value.toUpperCase());
<span class="hljs-keyword">const</span> onChangeMsg = <span class="hljs-function">() =&gt;</span> {
    msg.value = <span class="hljs-string">&#x27;renzp94&#x27;</span>;
};

<span class="hljs-keyword">const</span> stop = watchEffect(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(msg.value);
});

onMounted(stop);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h5 id="watch">watch</h5>
<p>和<code>watchEffect</code>API 相同，创建后不会立即执行，需要指定监听的数据源</p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">msg</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onChangeMsg&quot;</span>&gt;</span>改变Msg<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">count</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onAdd&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">const</span> msg = ref(<span class="hljs-string">&#x27;codebook&#x27;</span>);
<span class="hljs-keyword">const</span> onChangeMsg = <span class="hljs-function">() =&gt;</span> {
    msg.value = <span class="hljs-string">&#x27;renzp94&#x27;</span>;
};
<span class="hljs-keyword">const</span> count = ref(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> onAdd = <span class="hljs-function">() =&gt;</span> count.value++;

<span class="hljs-comment">// 监听单个数据</span>
watch(
    <span class="hljs-function">() =&gt;</span> count.value,
    <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
        <span class="hljs-built_in">console</span>.log(val);
    }
);
<span class="hljs-comment">// 监听多个数据</span>
watch([count, msg], <span class="hljs-function">(<span class="hljs-params">vals</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(vals);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 id="新增特性">新增特性</h2>
<h3 id="teleport">teleport</h3>
<p>将一个元素传送到指定位置</p>
<pre><code class="language-vue"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;body&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>父元素是body<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">teleport</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h3 id="片段">片段</h3>
<p>支持<code>template</code>中写多个根节点，不再需要指定一个根节点了。</p>
<h3 id="script-setup-语法糖">script setup 语法糖</h3>
<p>可以在<code>script</code>标签上指定属性为<code>setup</code>，则在<code>script</code>中书写的变量和函数无需导出即可在<code>template</code>中使用，极大的精简了代码书写，非常 nice 的一个想法。可以看到本文的代码例子都是使用<code>script setup</code>语法糖。</p>
<h3 id="在style中使用js变量">在<code>style</code>中使用<code>JS</code>变量</h3>
<p>可以在<code>style</code>标签中通过<code>v-bind</code>使用在<code>setup</code>中导出的变量，而且是响应式的。</p>
<pre><code class="language-vue"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;logo&quot;</span>&gt;</span>CodeBook<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onLargen&quot;</span>&gt;</span>变大<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onLessen&quot;</span>&gt;</span>变小<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;
<span class="hljs-keyword">const</span> fontSize = ref(<span class="hljs-string">&#x27;14px&#x27;</span>);
<span class="hljs-keyword">const</span> onLargen = <span class="hljs-function">() =&gt;</span> {
    fontSize.value = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">parseInt</span>(fontSize.value) + <span class="hljs-number">2</span>}</span>px`</span>;
};
<span class="hljs-keyword">const</span> onLessen = <span class="hljs-function">() =&gt;</span> {
    fontSize.value = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">parseInt</span>(fontSize.value) - <span class="hljs-number">2</span>}</span>px`</span>;
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.logo</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">v-bind</span>(fontSize);
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">700</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 id="变更">变更</h2>
<h3 id="v-model">v-model</h3>
<p><code>v-model</code>用于自定义组件的时候，<code>prop</code>由<code>value</code>改为<code>modelValue</code>，<code>event</code>由<code>input</code>改为<code>update:modelValue</code>，用在原生标签则没有变化。移除了<code>.sync</code>修饰符，通过<code>v-model:</code>代替。</p>
<p><code>AInput.vue</code></p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">title</span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onUpper&quot;</span>&gt;</span>title大写<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;modelValue&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;onInput&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { defineEmit, defineProps } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">const</span> props = defineProps({
    <span class="hljs-attr">modelValue</span>: [<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Number</span>],
    <span class="hljs-attr">title</span>: <span class="hljs-built_in">String</span>
});
<span class="hljs-keyword">const</span> emit = defineEmit([<span class="hljs-string">&#x27;update:modelValue&#x27;</span>, <span class="hljs-string">&#x27;update:title&#x27;</span>]);
<span class="hljs-keyword">const</span> onInput = (e: Event): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    emit(<span class="hljs-string">&#x27;update:modelValue&#x27;</span>, (e.target <span class="hljs-keyword">as</span> HTMLInputElement).value);
};
<span class="hljs-keyword">const</span> onUpper = <span class="hljs-function">() =&gt;</span> {
    emit(<span class="hljs-string">&#x27;update:title&#x27;</span>, props.title?.toUpperCase());
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><code>App.vue</code></p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
        </span><span class="hljs-template-variable">{{ <span class="hljs-name">inputValue</span> }}</span><span class="xml">
    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>自定义Input<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a-input</span> <span class="hljs-attr">v-model:title</span>=<span class="hljs-string">&quot;inputTitle&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;inputValue&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>原生Input<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;inputValue&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;
<span class="hljs-keyword">import</span> AInput <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/AInput.vue&#x27;</span>;
<span class="hljs-keyword">const</span> inputValue = ref(<span class="hljs-string">&#x27;&#x27;</span>);
<span class="hljs-keyword">const</span> inputTitle = ref(<span class="hljs-string">&#x27;codebook&#x27;</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 id="自定义组件-ref">自定义组件 ref</h3>
<p>自定义组件指定 ref 时，无法直接绑定到内部根元素上，可以通过<code>expose</code>共享的解决方案解决此问题。</p>
<p><code>AInput.vue</code></p>
<pre><code class="language-vue"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;input&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;modelValue&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;onInput&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { defineEmit, defineProps, ref, useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

defineProps({
    <span class="hljs-attr">modelValue</span>: [<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Number</span>]
});
<span class="hljs-keyword">const</span> emit = defineEmit([<span class="hljs-string">&#x27;update:modelValue&#x27;</span>]);
<span class="hljs-keyword">const</span> onInput = (e: Event): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    emit(<span class="hljs-string">&#x27;update:modelValue&#x27;</span>, (e.target <span class="hljs-keyword">as</span> HTMLInputElement).value);
};

<span class="hljs-keyword">const</span> input = ref&lt;HTMLInputElement | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> { expose } = useContext();
<span class="hljs-keyword">const</span> autoFocus = <span class="hljs-function">() =&gt;</span> {
    input.value?.focus();
};

expose({ autoFocus });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><code>App.vue</code></p>
<pre><code class="language-vue"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    </span><span class="hljs-template-variable">{{ <span class="hljs-name">inputValue</span> }}</span><span class="xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">a-input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;input&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;inputValue&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;
<span class="hljs-keyword">import</span> AInput <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/AInput.vue&#x27;</span>;
<span class="hljs-keyword">const</span> inputValue = ref(<span class="hljs-string">&#x27;&#x27;</span>);
<span class="hljs-keyword">const</span> input = ref&lt;any&gt;(<span class="hljs-literal">null</span>);

onMounted(<span class="hljs-function">() =&gt;</span> {
    input.value?.autoFocus();
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 id="小改变">小改变</h3>
<ul>
<li><code>v-if</code>比<code>v-for</code>的优先级更高。</li>
<li><code>&lt;template v-for /&gt;</code>现在不需要指定到真实节点了，只需指定到<code>template</code>即可。</li>
<li><code>异步组件</code>通过<code>defineAsyncComponent</code>来创建。</li>
<li>组件中的<code>prop</code>的<code>default</code>函数不能访问<code>this</code></li>
<li><code>data</code>需要始终声明为函数</li>
<li><code>mixin</code>被设置为浅合并</li>
</ul>
</div>
</section></main>
</section></main>
	
<div class="back-top svelte-9c9s8u" style="bottom: 5rem;right: 0.625rem;display: none"><i class="iconfont icon-back-top"></i>
</div>
</section>



	<script type="svelte-data" url="20210605160206.json">{"status":200,"statusText":"","headers":{"content-type":"text/plain;charset=UTF-8"},"body":"{\"title\":\"从Vue2迁移Vue3的全攻略\",\"slug\":\"svelte kit\",\"time\":\"2021-06-05T16:03:16.000Z\",\"author\":\"renzp94\",\"status\":\"done\",\"html\":\"\u003Cp\u003E从\u003Ccode\u003EVue3 alpha\u003C\u002Fcode\u003E(2019.12.21)发布开始，开始关注\u003Ccode\u003EVue3\u003C\u002Fcode\u003E，并通过\u003Ccode\u003E@vue\u002Fcomposition-api\u003C\u002Fcode\u003E包在 Vue2 的练习项目使用，到后来的\u003Ccode\u003EVue3 beta\u003C\u002Fcode\u003E(2020.4.17)发布，直接使用\u003Ccode\u003EVue3 beta\u003C\u002Fcode\u003E版本再次尝试，再到后来的\u003Ccode\u003EVue3 rc\u003C\u002Fcode\u003E(2020.7.18)，以及最后终于在\u003Ccode\u003E2020.9.18\u003C\u002Fcode\u003E发布了正式版，这一路学着不断变更的 api，经常过一段时间发现之前的 api 变了，直到\u003Ccode\u003EVue3\u003C\u002Fcode\u003E的生态稳定之后又开始尝试，发现真香。\\n\u003Cbr \u002F\u003E\\n其实，最好的学习文章应该是\u003Ca href=\\\"https:\u002F\u002Fv3.cn.vuejs.org\u002F\\\"\u003E官方文档\u003C\u002Fa\u003E，不得不说\u003Ccode\u003EVUE\u003C\u002Fcode\u003E的文档是真的不错，在 Vue3 官网上也有\u003Ca href=\\\"https:\u002F\u002Fv3.cn.vuejs.org\u002Fguide\u002Fmigration\u002Fintroduction.html\\\"\u003EVue3 迁移指南\u003C\u002Fa\u003E。所以，如果需要认真的了解全部的 Vue3 内容建议去官网学习，此文章只会针对性的说明一些我在实际开发中遇到的变更。\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"组合式-api\\\"\u003E组合式 API\u003C\u002Fh2\u003E\\n\u003Cp\u003EVue3 重大更新就是\u003Ccode\u003E组合式API(Composition Api)\u003C\u002Fcode\u003E了，接下来就一一说明一下。\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"生命周期\\\"\u003E生命周期\u003C\u002Fh3\u003E\\n\u003Ctable\u003E\\n\u003Cthead\u003E\\n\u003Ctr\u003E\\n\u003Cth\u003E选项式\u003C\u002Fth\u003E\\n\u003Cth\u003EHook inside setup\u003C\u002Fth\u003E\\n\u003C\u002Ftr\u003E\\n\u003C\u002Fthead\u003E\\n\u003Ctbody\u003E\u003Ctr\u003E\\n\u003Ctd\u003EbeforeCreate\u003C\u002Ftd\u003E\\n\u003Ctd\u003Esetup\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003Ecreated\u003C\u002Ftd\u003E\\n\u003Ctd\u003Esetup\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003EbeforeMount\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonBeforeMount\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003Emounted\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonMounted\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003EbeforeUpdate\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonBeforeUpdate\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003Eupdated\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonUpdated\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003EbeforeUnmount\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonBeforeUnmount\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003Eunmounted\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonUnmounted\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003EerrorCaptured\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonErrorCaptured\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003ErenderTracked\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonRenderTracked\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003ErenderTriggered\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonRenderTriggered\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003Eactivated\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonActivated\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003Edeactivated\u003C\u002Ftd\u003E\\n\u003Ctd\u003EonDeactivated\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\\n\u003Ch3 id=\\\"setup\\\"\u003Esetup\u003C\u002Fh3\u003E\\n\u003Cp\u003E一个组件选项，在创建组件之前执行，一旦 props 被解析，并作为组合式 API 的入口点\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Ccode\u003Esetup\u003C\u002Fcode\u003E函数有两个参数: \u003Ccode\u003Eprops\u003C\u002Fcode\u003E和\u003Ccode\u003Ectx\u003C\u002Fcode\u003E,其中 ctx 是一个对象(\u003Ccode\u003E{attrs,slots,emit}\u003C\u002Fcode\u003E).\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003Eattrs: 绑定在组件中的所有\u003Ccode\u003E显示指定\u003C\u002Fcode\u003E的\u003Ccode\u003Eprops\u003C\u002Fcode\u003E,这里需要特别注意的是在\u003Ccode\u003EVue3\u003C\u002Fcode\u003E中如果需要将属性绑定到组件根节点需要声明\u003Ccode\u003Eprops\u003C\u002Fcode\u003E,对应\u003Ccode\u003EVue2\u003C\u002Fcode\u003E的\u003Ccode\u003Ethis.$attrs\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003Eslots: 插槽列表,对应\u003Ccode\u003EVue2\u003C\u002Fcode\u003E中的\u003Ccode\u003Ethis.$slots\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003Eemit: 触发事件,对应\u003Ccode\u003EVue2\u003C\u002Fcode\u003E中的\u003Ccode\u003Ethis.$emit\u003C\u002Fcode\u003E,若组件内需要触发事件，需要在\u003Ccode\u003Eemtis\u003C\u002Fcode\u003E选项中配置或者在使用\u003Ccode\u003EdefineEmit\u003C\u002Fcode\u003E时指定。\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003E在\u003Ccode\u003Esetup\u003C\u002Fcode\u003E函数中定义的变量或函数，如果需要在\u003Ccode\u003Etemplate\u003C\u002Fcode\u003E中使用的话需要在\u003Ccode\u003Esetup\u003C\u002Fcode\u003E函数中返回，不返回的无法在\u003Ccode\u003Etemplate\u003C\u002Fcode\u003E中使用。这样写会有一些繁琐，所以\u003Ccode\u003EVue3\u003C\u002Fcode\u003E提出了一个新想法: \u003Ccode\u003Escript setup\u003C\u002Fcode\u003E。在\u003Ccode\u003Escript\u003C\u002Fcode\u003E标签上标注为\u003Ccode\u003Esetup\u003C\u002Fcode\u003E则不需要返回定义的变量和函数就可以在\u003Ccode\u003Etemplate\u003C\u002Fcode\u003E中使用。\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Ccode\u003ECount.vue\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003Ecount\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;$emit(&#x27;sub&#x27;)&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E-1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;$emit(&#x27;add&#x27;)&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E+1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { defineComponent } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Edefault\u003C\u002Fspan\u003E defineComponent({\\n    \u003Cspan class=\\\"hljs-attr\\\"\u003Ename\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;Count&#x27;\u003C\u002Fspan\u003E,\\n    \u003Cspan class=\\\"hljs-attr\\\"\u003Eprops\u003C\u002Fspan\u003E: {\\n        \u003Cspan class=\\\"hljs-attr\\\"\u003Ecount\u003C\u002Fspan\u003E: {\\n            \u003Cspan class=\\\"hljs-attr\\\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-built_in\\\"\u003ENumber\u003C\u002Fspan\u003E,\\n            \u003Cspan class=\\\"hljs-attr\\\"\u003Edefault\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E\\n        }\\n    },\\n    \u003Cspan class=\\\"hljs-attr\\\"\u003Eemits\u003C\u002Fspan\u003E: [\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;sub&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;add&#x27;\u003C\u002Fspan\u003E]\\n});\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003E\u003Ccode\u003EApp.vue\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ecount\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003E:count\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;count&quot;\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eadd\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onAdd&quot;\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Esub\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onSub&quot;\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { defineComponent, ref } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E Count \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;.\u002Fcomponents\u002FCount.vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Edefault\u003C\u002Fspan\u003E defineComponent({\\n    \u003Cspan class=\\\"hljs-attr\\\"\u003Ename\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;App&#x27;\u003C\u002Fspan\u003E,\\n    \u003Cspan class=\\\"hljs-attr\\\"\u003Ecomponents\u003C\u002Fspan\u003E: { Count },\\n    \u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-title\\\"\u003Esetup\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003E\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E {\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E count = ref(\u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E);\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onAdd = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count.value++;\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onSub = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count.value--;\\n\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E {\\n            count,\\n            onAdd,\\n            onSub\\n        };\\n    }\\n});\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003E如果使用\u003Ccode\u003Escript setup\u003C\u002Fcode\u003E，则是下面的代码\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Ccode\u003ECount.vue\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ count }\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E}\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;$emit(&#x27;sub&#x27;)&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E-1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;$emit(&#x27;add&#x27;)&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E+1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{ defineComponent, defineEmit, defineProps }\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"javascript\\\"\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\ndefineComponent(\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{\\n    name: &#x27;Count&#x27;\\n}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E);\\ndefineProps(\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{\\n    count: {\\n        type: Number,\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Edefault\u003C\u002Fspan\u003E: 0\\n    }\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n});\\ndefineEmit([\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;sub&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;add&#x27;\u003C\u002Fspan\u003E]);\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003E\u003Ccode\u003EApp.vue\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ecount\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003E:count\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;count&quot;\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eadd\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onAdd&quot;\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Esub\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onSub&quot;\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{ ref }\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"javascript\\\"\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E Count \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;.\u002Fcomponents\u002FCount.vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E count = ref(\u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onAdd = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count.value++;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onSub = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count.value--;\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E注意：\u003Ccode\u003Escript setup\u003C\u002Fcode\u003E目前\u003Ccode\u003E(Vue: ^3.0.5)\u003C\u002Fcode\u003E是\u003Ccode\u003ERFC\u003C\u002Fcode\u003E状态\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Ch3 id=\\\"ref\\\"\u003Eref\u003C\u002Fh3\u003E\\n\u003Cp\u003E将一个基本类型的数据转换成响应式且可变的 ref 对象, 通过\u003Ccode\u003E.value\u003C\u002Fcode\u003E属性修改和获取值.\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003Ecount\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onAdd&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E+1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { ref } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E count = ref(\u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onAdd = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count.value++;\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003E在\u003Ccode\u003Escript\u003C\u002Fcode\u003E中,需要使用\u003Ccode\u003E.value\u003C\u002Fcode\u003E,但是在\u003Ccode\u003Etemplate\u003C\u002Fcode\u003E中不再需要,Vue 会自动解开,如果觉得\u003Ccode\u003Escript\u003C\u002Fcode\u003E中的\u003Ccode\u003E.value\u003C\u002Fcode\u003E不顺眼,其实还有一个语法糖\u003Ccode\u003Eref:\u003C\u002Fcode\u003E,通过此语法糖可以不使用\u003Ccode\u003E.value\u003C\u002Fcode\u003E直接设置和获取值.\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003Ecount\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onAdd&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E+1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-attr\\\"\u003Eref\u003C\u002Fspan\u003E: count = \u003Cspan class=\\\"hljs-number\\\"\u003E1\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onAdd = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count++;\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E注意：\u003Ccode\u003Eref: \u003C\u002Fcode\u003E目前\u003Ccode\u003E(Vue: ^3.0.5)\u003C\u002Fcode\u003E是\u003Ccode\u003ERFC\u003C\u002Fcode\u003E状态,且只能在\u003Ccode\u003ESFC(单文件)\u003C\u002Fcode\u003E中使用\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Ch4 id=\\\"ref-的配套方法\\\"\u003Eref 的配套方法\u003C\u002Fh4\u003E\\n\u003Ch5 id=\\\"unref\\\"\u003Eunref\u003C\u002Fh5\u003E\\n\u003Cp\u003E如果参数是一个\u003Ccode\u003Eref\u003C\u002Fcode\u003E则返回内部值,如果不是则返回参数本身.即: \u003Ccode\u003EisRef(val) ? val.value : val\u003C\u002Fcode\u003E的语法糖\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"toref\\\"\u003EtoRef\u003C\u002Fh5\u003E\\n\u003Cp\u003E将一个响应式的对象属性转为响应式的.\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ count }\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E}\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onAdd&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E+1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{ reactive, toRef }\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"javascript\\\"\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E state = reactive(\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{\\n    count: 0\\n}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"javascript\\\"\u003E);\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E count = toRef(state, \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;count&#x27;\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onAdd = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count.value++;\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch5 id=\\\"torefs\\\"\u003EtoRefs\u003C\u002Fh5\u003E\\n\u003Cp\u003E将一个响应式的对象,转换成一个普通对象,并且将对象中的属性转换为\u003Ccode\u003Eref\u003C\u002Fcode\u003E对象.一般的,当想对一个\u003Ccode\u003Ereactive\u003C\u002Fcode\u003E包装的响应式对象进行解构时,解构之后的变量将会失去响应式,此时可通过\u003Ccode\u003EtoRefs\u003C\u002Fcode\u003E将对象转换然后再解构\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ count }\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E}\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onAdd&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E+1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{ reactive, toRefs }\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"javascript\\\"\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E state = reactive(\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{\\n    count: 0,\\n    text: &#x27;hello&#x27;\\n}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"javascript\\\"\u003E);\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{ count }\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"javascript\\\"\u003E = toRefs(state);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onAdd = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count.value++;\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch5 id=\\\"isref\\\"\u003EisRef\u003C\u002Fh5\u003E\\n\u003Cp\u003E检查值是否为一个\u003Ccode\u003Eref\u003C\u002Fcode\u003E对象.\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"customref\\\"\u003EcustomRef\u003C\u002Fh5\u003E\\n\u003Cp\u003E创建一个自定义的 \u003Ccode\u003Eref\u003C\u002Fcode\u003E，并对其依赖项跟踪和更新触发进行显式控制。它需要一个工厂函数，该函数接收 \u003Ccode\u003Etrack\u003C\u002Fcode\u003E 和 \u003Ccode\u003Etrigger\u003C\u002Fcode\u003E 函数作为参数，并且应该返回一个带有 \u003Ccode\u003Eget\u003C\u002Fcode\u003E 和 \u003Ccode\u003Eset\u003C\u002Fcode\u003E 的对象\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"shallowref\\\"\u003EshallowRef\u003C\u002Fh5\u003E\\n\u003Cp\u003E创建一个跟踪自身 .value 变化的 ref，但不会使其值也变成响应式的。即：改变\u003Ccode\u003E.value\u003C\u002Fcode\u003E是响应式的，但是\u003Ccode\u003E.value\u003C\u002Fcode\u003E本身不是响应式的\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"triggerref\\\"\u003EtriggerRef\u003C\u002Fh5\u003E\\n\u003Cp\u003E手动执行与 \u003Ccode\u003EshallowRef\u003C\u002Fcode\u003E 关联的任何副作用。\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"reactive\\\"\u003Ereactive\u003C\u002Fh5\u003E\\n\u003Cp\u003E返回对象的响应式副本。\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"hljs-variable\\\"\u003E&lt;template&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-variable\\\"\u003E&lt;div&gt;\u003C\u002Fspan\u003E{{ \u003Cspan class=\\\"hljs-keyword\\\"\u003Estate\u003C\u002Fspan\u003E.count }}&lt;\u002Fdiv&gt;\\n    \u003Cspan class=\\\"hljs-variable\\\"\u003E&lt;button @click=&quot;onAdd&quot;&gt;\u003C\u002Fspan\u003E+\u003Cspan class=\\\"hljs-number\\\"\u003E1\u003C\u002Fspan\u003E&lt;\u002Fbutton&gt;\\n&lt;\u002Ftemplate&gt;\\n\\n\u003Cspan class=\\\"hljs-variable\\\"\u003E&lt;script setup lang=&quot;ts&quot;&gt;\u003C\u002Fspan\u003E\\nimport { reactive } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E &#x27;vue&#x27;;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Estate\u003C\u002Fspan\u003E = reactive({\\n    count: \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E,\\n    text: &#x27;hello&#x27;,\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Euser\u003C\u002Fspan\u003E: {\\n        nickname: &#x27;codebook&#x27;\\n    }\\n});\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Eon\u003C\u002Fspan\u003EAdd = () =&gt; \u003Cspan class=\\\"hljs-keyword\\\"\u003Estate\u003C\u002Fspan\u003E.count++;\\n&lt;\u002Fscript&gt;\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E注意：\u003Ccode\u003Ereactive\u003C\u002Fcode\u003E包装的是深度响应式，即：\u003Ccode\u003Estate.user.nickname\u003C\u002Fcode\u003E改变之后也会触发渲染。如果不想深度响应式可使用\u003Ccode\u003EshallowReactive\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Ch5 id=\\\"readonly\\\"\u003Ereadonly\u003C\u002Fh5\u003E\\n\u003Cp\u003E接受一个对象 (响应式或纯对象) 或 \u003Ccode\u003Eref\u003C\u002Fcode\u003E 并返回原始对象的只读代理。只读代理是深层的：任何被访问的嵌套属性也是只读的。\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"hljs-variable\\\"\u003E&lt;template&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-variable\\\"\u003E&lt;div&gt;\u003C\u002Fspan\u003E{{ \u003Cspan class=\\\"hljs-keyword\\\"\u003Estate\u003C\u002Fspan\u003E.count }}&lt;\u002Fdiv&gt;\\n    \u003Cspan class=\\\"hljs-variable\\\"\u003E&lt;button @click=&quot;onAdd&quot;&gt;\u003C\u002Fspan\u003E+\u003Cspan class=\\\"hljs-number\\\"\u003E1\u003C\u002Fspan\u003E&lt;\u002Fbutton&gt;\\n&lt;\u002Ftemplate&gt;\\n\\n\u003Cspan class=\\\"hljs-variable\\\"\u003E&lt;script setup lang=&quot;ts&quot;&gt;\u003C\u002Fspan\u003E\\nimport { reactive, readonly, watchEffect } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E &#x27;vue&#x27;;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Estate\u003C\u002Fspan\u003E = reactive({\\n    count: \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E,\\n    text: &#x27;hello&#x27;\\n});\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E readonlyState = readonly(\u003Cspan class=\\\"hljs-keyword\\\"\u003Estate\u003C\u002Fspan\u003E);\\n\\nwatchEffect(() =&gt; {\\n    console.\u003Cspan class=\\\"hljs-keyword\\\"\u003Elog\u003C\u002Fspan\u003E(readonlyState.count);\\n});\\n\\n\u002F\u002F 触发watchEffect\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Estate\u003C\u002Fspan\u003E.count++;\\n\\n\u002F\u002F 点击不会触发watchEffect，且会出现警告\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Eon\u003C\u002Fspan\u003EAdd = () =&gt; readonlyState.count++;\\n&lt;\u002Fscript&gt;\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch5 id=\\\"isproxy\\\"\u003EisProxy\u003C\u002Fh5\u003E\\n\u003Cp\u003E检查对象是否是由 \u003Ccode\u003Ereactive\u003C\u002Fcode\u003E 或 \u003Ccode\u003Ereadonly\u003C\u002Fcode\u003E 创建的 \u003Ccode\u003Eproxy\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"isreactive\\\"\u003EisReactive\u003C\u002Fh5\u003E\\n\u003Cp\u003E检查对象是否是由 \u003Ccode\u003Ereactive\u003C\u002Fcode\u003E 创建的响应式代理。\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"isreadonly\\\"\u003EisReadonly\u003C\u002Fh5\u003E\\n\u003Cp\u003E检查对象是否是由 \u003Ccode\u003Ereadonly\u003C\u002Fcode\u003E 创建的只读代理。\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"toraw\\\"\u003EtoRaw\u003C\u002Fh5\u003E\\n\u003Cp\u003E返回 \u003Ccode\u003Ereactive\u003C\u002Fcode\u003E 或 \u003Ccode\u003Ereadonly\u003C\u002Fcode\u003E 代理的原始对象。\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"markraw\\\"\u003EmarkRaw\u003C\u002Fh5\u003E\\n\u003Cp\u003E标记一个对象，使其永远不会转换为 \u003Ccode\u003Eproxy\u003C\u002Fcode\u003E。返回对象本身。\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"shallowreactive\\\"\u003EshallowReactive\u003C\u002Fh5\u003E\\n\u003Cp\u003E创建一个响应式代理，它跟踪其自身 \u003Ccode\u003Eproperty\u003C\u002Fcode\u003E 的响应性，但不执行嵌套对象的深层响应式转换 (暴露原始值)。\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"shallowreadonly\\\"\u003EshallowReadonly\u003C\u002Fh5\u003E\\n\u003Cp\u003E创建一个 \u003Ccode\u003Eproxy\u003C\u002Fcode\u003E，使其自身的 \u003Ccode\u003Eproperty\u003C\u002Fcode\u003E 为只读，但不执行嵌套对象的深度只读转换 (暴露原始值)。\u003C\u002Fp\u003E\\n\u003Ch5 id=\\\"computed\\\"\u003Ecomputed\u003C\u002Fh5\u003E\\n\u003Cp\u003E如果传入的是一个函数，则此函数为\u003Ccode\u003Egetter\u003C\u002Fcode\u003E函数，如果传入的是个对象，则\u003Ccode\u003Eget\u003C\u002Fcode\u003E属性函数为\u003Ccode\u003Egetter\u003C\u002Fcode\u003E，\u003Ccode\u003Eset\u003C\u002Fcode\u003E属性函数为\u003Ccode\u003Esetter\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003Emsg\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003EUpperMsg\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onChangeMsg&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E改变Msg\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { computed, ref } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E msg = ref(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;codebook&#x27;\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E UpperMsg = computed(\u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E msg.value.toUpperCase());\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onChangeMsg = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    msg.value = \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;renzp94&#x27;\u003C\u002Fspan\u003E;\\n};\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch5 id=\\\"watcheffect\\\"\u003EwatchEffect\u003C\u002Fh5\u003E\\n\u003Cp\u003E在响应式地跟踪其依赖项时立即运行一个函数，并在更改依赖项时重新运行它。其返回一个停止函数\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003Emsg\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003EUpperMsg\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onChangeMsg&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E改变Msg\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { computed, ref, watchEffect } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E msg = ref(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;codebook&#x27;\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E UpperMsg = computed(\u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E msg.value.toUpperCase());\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onChangeMsg = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    msg.value = \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;renzp94&#x27;\u003C\u002Fspan\u003E;\\n};\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E stop = watchEffect(\u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Econsole\u003C\u002Fspan\u003E.log(msg.value);\\n});\\n\\nonMounted(stop);\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch5 id=\\\"watch\\\"\u003Ewatch\u003C\u002Fh5\u003E\\n\u003Cp\u003E和\u003Ccode\u003EwatchEffect\u003C\u002Fcode\u003EAPI 相同，创建后不会立即执行，需要指定监听的数据源\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003Emsg\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onChangeMsg&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E改变Msg\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003Ecount\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onAdd&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E+1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { ref, watch } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E msg = ref(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;codebook&#x27;\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onChangeMsg = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    msg.value = \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;renzp94&#x27;\u003C\u002Fspan\u003E;\\n};\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E count = ref(\u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onAdd = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count.value++;\\n\\n\u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F 监听单个数据\u003C\u002Fspan\u003E\\nwatch(\\n    \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E count.value,\\n    \u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003Eval\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\\n        \u003Cspan class=\\\"hljs-built_in\\\"\u003Econsole\u003C\u002Fspan\u003E.log(val);\\n    }\\n);\\n\u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F 监听多个数据\u003C\u002Fspan\u003E\\nwatch([count, msg], \u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003Evals\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Econsole\u003C\u002Fspan\u003E.log(vals);\\n});\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch2 id=\\\"新增特性\\\"\u003E新增特性\u003C\u002Fh2\u003E\\n\u003Ch3 id=\\\"teleport\\\"\u003Eteleport\u003C\u002Fh3\u003E\\n\u003Cp\u003E将一个元素传送到指定位置\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Eteleport\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eto\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;body&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E父元素是body\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Eteleport\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch3 id=\\\"片段\\\"\u003E片段\u003C\u002Fh3\u003E\\n\u003Cp\u003E支持\u003Ccode\u003Etemplate\u003C\u002Fcode\u003E中写多个根节点，不再需要指定一个根节点了。\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"script-setup-语法糖\\\"\u003Escript setup 语法糖\u003C\u002Fh3\u003E\\n\u003Cp\u003E可以在\u003Ccode\u003Escript\u003C\u002Fcode\u003E标签上指定属性为\u003Ccode\u003Esetup\u003C\u002Fcode\u003E，则在\u003Ccode\u003Escript\u003C\u002Fcode\u003E中书写的变量和函数无需导出即可在\u003Ccode\u003Etemplate\u003C\u002Fcode\u003E中使用，极大的精简了代码书写，非常 nice 的一个想法。可以看到本文的代码例子都是使用\u003Ccode\u003Escript setup\u003C\u002Fcode\u003E语法糖。\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"在style中使用js变量\\\"\u003E在\u003Ccode\u003Estyle\u003C\u002Fcode\u003E中使用\u003Ccode\u003EJS\u003C\u002Fcode\u003E变量\u003C\u002Fh3\u003E\\n\u003Cp\u003E可以在\u003Ccode\u003Estyle\u003C\u002Fcode\u003E标签中通过\u003Ccode\u003Ev-bind\u003C\u002Fcode\u003E使用在\u003Ccode\u003Esetup\u003C\u002Fcode\u003E中导出的变量，而且是响应式的。\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;logo&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003ECodeBook\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onLargen&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E变大\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onLessen&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E变小\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { ref } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E fontSize = ref(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;14px&#x27;\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onLargen = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    fontSize.value = \u003Cspan class=\\\"hljs-string\\\"\u003E`\u003Cspan class=\\\"hljs-subst\\\"\u003E${\u003Cspan class=\\\"hljs-built_in\\\"\u003EparseInt\u003C\u002Fspan\u003E(fontSize.value) + \u003Cspan class=\\\"hljs-number\\\"\u003E2\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003Epx`\u003C\u002Fspan\u003E;\\n};\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onLessen = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    fontSize.value = \u003Cspan class=\\\"hljs-string\\\"\u003E`\u003Cspan class=\\\"hljs-subst\\\"\u003E${\u003Cspan class=\\\"hljs-built_in\\\"\u003EparseInt\u003C\u002Fspan\u003E(fontSize.value) - \u003Cspan class=\\\"hljs-number\\\"\u003E2\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003Epx`\u003C\u002Fspan\u003E;\\n};\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Estyle\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Escoped\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"css\\\"\u003E\\n\u003Cspan class=\\\"hljs-selector-class\\\"\u003E.logo\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-attribute\\\"\u003Efont-size\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-built_in\\\"\u003Ev-bind\u003C\u002Fspan\u003E(fontSize);\\n    \u003Cspan class=\\\"hljs-attribute\\\"\u003Efont-weight\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-number\\\"\u003E700\u003C\u002Fspan\u003E;\\n}\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Estyle\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch2 id=\\\"变更\\\"\u003E变更\u003C\u002Fh2\u003E\\n\u003Ch3 id=\\\"v-model\\\"\u003Ev-model\u003C\u002Fh3\u003E\\n\u003Cp\u003E\u003Ccode\u003Ev-model\u003C\u002Fcode\u003E用于自定义组件的时候，\u003Ccode\u003Eprop\u003C\u002Fcode\u003E由\u003Ccode\u003Evalue\u003C\u002Fcode\u003E改为\u003Ccode\u003EmodelValue\u003C\u002Fcode\u003E，\u003Ccode\u003Eevent\u003C\u002Fcode\u003E由\u003Ccode\u003Einput\u003C\u002Fcode\u003E改为\u003Ccode\u003Eupdate:modelValue\u003C\u002Fcode\u003E，用在原生标签则没有变化。移除了\u003Ccode\u003E.sync\u003C\u002Fcode\u003E修饰符，通过\u003Ccode\u003Ev-model:\u003C\u002Fcode\u003E代替。\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Ccode\u003EAInput.vue\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003Etitle\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onUpper&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003Etitle大写\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Einput\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Etype\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;text&quot;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003E:value\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;modelValue&quot;\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Einput\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onInput&quot;\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { defineEmit, defineProps } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E props = defineProps({\\n    \u003Cspan class=\\\"hljs-attr\\\"\u003EmodelValue\u003C\u002Fspan\u003E: [\u003Cspan class=\\\"hljs-built_in\\\"\u003EString\u003C\u002Fspan\u003E, \u003Cspan class=\\\"hljs-built_in\\\"\u003ENumber\u003C\u002Fspan\u003E],\\n    \u003Cspan class=\\\"hljs-attr\\\"\u003Etitle\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-built_in\\\"\u003EString\u003C\u002Fspan\u003E\\n});\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E emit = defineEmit([\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;update:modelValue&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;update:title&#x27;\u003C\u002Fspan\u003E]);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onInput = (e: Event): \u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-params\\\"\u003Evoid\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E {\\n    emit(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;update:modelValue&#x27;\u003C\u002Fspan\u003E, (e.target \u003Cspan class=\\\"hljs-keyword\\\"\u003Eas\u003C\u002Fspan\u003E HTMLInputElement).value);\\n};\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onUpper = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    emit(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;update:title&#x27;\u003C\u002Fspan\u003E, props.title?.toUpperCase());\\n};\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003E\u003Ccode\u003EApp.vue\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ep\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003EinputValue\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ep\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ep\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E自定义Input\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ea-input\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Ev-model:title\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;inputTitle&quot;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Ev-model\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;inputValue&quot;\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ep\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ep\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E原生Input\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Einput\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Etype\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;text&quot;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Ev-model\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;inputValue&quot;\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ep\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { ref } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E AInput \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;.\u002Fcomponents\u002FAInput.vue&#x27;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E inputValue = ref(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E inputTitle = ref(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;codebook&#x27;\u003C\u002Fspan\u003E);\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch3 id=\\\"自定义组件-ref\\\"\u003E自定义组件 ref\u003C\u002Fh3\u003E\\n\u003Cp\u003E自定义组件指定 ref 时，无法直接绑定到内部根元素上，可以通过\u003Ccode\u003Eexpose\u003C\u002Fcode\u003E共享的解决方案解决此问题。\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Ccode\u003EAInput.vue\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Einput\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eref\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;input&quot;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Etype\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;text&quot;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003E:value\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;modelValue&quot;\u003C\u002Fspan\u003E @\u003Cspan class=\\\"hljs-attr\\\"\u003Einput\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;onInput&quot;\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { defineEmit, defineProps, ref, useContext } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\\ndefineProps({\\n    \u003Cspan class=\\\"hljs-attr\\\"\u003EmodelValue\u003C\u002Fspan\u003E: [\u003Cspan class=\\\"hljs-built_in\\\"\u003EString\u003C\u002Fspan\u003E, \u003Cspan class=\\\"hljs-built_in\\\"\u003ENumber\u003C\u002Fspan\u003E]\\n});\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E emit = defineEmit([\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;update:modelValue&#x27;\u003C\u002Fspan\u003E]);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onInput = (e: Event): \u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-params\\\"\u003Evoid\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E {\\n    emit(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;update:modelValue&#x27;\u003C\u002Fspan\u003E, (e.target \u003Cspan class=\\\"hljs-keyword\\\"\u003Eas\u003C\u002Fspan\u003E HTMLInputElement).value);\\n};\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E input = ref&lt;HTMLInputElement | \u003Cspan class=\\\"hljs-literal\\\"\u003Enull\u003C\u002Fspan\u003E&gt;(\u003Cspan class=\\\"hljs-literal\\\"\u003Enull\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E { expose } = useContext();\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E autoFocus = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    input.value?.focus();\\n};\\n\\nexpose({ autoFocus });\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003E\u003Ccode\u003EApp.vue\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-vue\\\"\u003E\u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-template-variable\\\"\u003E{{ \u003Cspan class=\\\"hljs-name\\\"\u003EinputValue\u003C\u002Fspan\u003E }}\u003C\u002Fspan\u003E\u003Cspan class=\\\"xml\\\"\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ea-input\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eref\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;input&quot;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Ev-model\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;inputValue&quot;\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Etemplate\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Esetup\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ts&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"javascript\\\"\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E { onMounted, ref } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;vue&#x27;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E AInput \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;.\u002Fcomponents\u002FAInput.vue&#x27;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E inputValue = ref(\u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E);\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E input = ref&lt;any&gt;(\u003Cspan class=\\\"hljs-literal\\\"\u003Enull\u003C\u002Fspan\u003E);\\n\\nonMounted(\u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    input.value?.autoFocus();\\n});\\n\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch3 id=\\\"小改变\\\"\u003E小改变\u003C\u002Fh3\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\u003Ccode\u003Ev-if\u003C\u002Fcode\u003E比\u003Ccode\u003Ev-for\u003C\u002Fcode\u003E的优先级更高。\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ccode\u003E&lt;template v-for \u002F&gt;\u003C\u002Fcode\u003E现在不需要指定到真实节点了，只需指定到\u003Ccode\u003Etemplate\u003C\u002Fcode\u003E即可。\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ccode\u003E异步组件\u003C\u002Fcode\u003E通过\u003Ccode\u003EdefineAsyncComponent\u003C\u002Fcode\u003E来创建。\u003C\u002Fli\u003E\\n\u003Cli\u003E组件中的\u003Ccode\u003Eprop\u003C\u002Fcode\u003E的\u003Ccode\u003Edefault\u003C\u002Fcode\u003E函数不能访问\u003Ccode\u003Ethis\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ccode\u003Edata\u003C\u002Fcode\u003E需要始终声明为函数\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ccode\u003Emixin\u003C\u002Fcode\u003E被设置为浅合并\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\"}"}</script>
</div>
	</body>
</html>
