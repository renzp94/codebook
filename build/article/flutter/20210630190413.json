{"title":"Wigets学习之BottomSheet","slug":"Flutter Wiget","time":"2021-06-30T19:04:45.000Z","author":"renzp94","status":"done","html":"<p><code>Flutter</code>提供了两个方法来唤起<code>BottomSheet</code>：<code>showBottomSheet</code>、<code>showModalBottomSheet</code></p>\n<h2 id=\"showbottomsheet\">showBottomSheet</h2>\n<blockquote>\n<p>从底部弹出一个弹出层</p>\n</blockquote>\n<ul>\n<li><code>context</code>：上下文(必填)</li>\n<li><code>builder</code>：弹出层内容生成函数(必填)</li>\n<li><code>backgroundColor</code>：背景色</li>\n<li><code>elevation</code>：阴影</li>\n<li><code>shape</code>：裁剪</li>\n</ul>\n<pre><code class=\"language-dart\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-symbol\">&#x27;package</span>:flutter/material.dart&#x27;;\n\nvoid main() {\n  runApp(<span class=\"hljs-type\">App</span>());\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">App</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>{\n  <span class=\"hljs-meta\">@override</span>\n  <span class=\"hljs-type\">Widget</span> build(<span class=\"hljs-type\">BuildContext</span> context) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">MaterialApp</span>(\n      title: <span class=\"hljs-symbol\">&#x27;BottomSheet</span>学习&#x27;,\n      home: <span class=\"hljs-type\">Home</span>(),\n    );\n  }\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Home</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatefulWidget</span> </span>{\n  <span class=\"hljs-type\">Home</span>({<span class=\"hljs-type\">Key</span>? key}) : <span class=\"hljs-keyword\">super</span>(key: key);\n\n  _HomeState createState() =&gt; _HomeState();\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">_HomeState</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">State&lt;Home&gt;</span> </span>{\n  <span class=\"hljs-meta\">@override</span>\n  <span class=\"hljs-type\">Widget</span> build(<span class=\"hljs-type\">BuildContext</span> context) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">Scaffold</span>(\n      appBar: <span class=\"hljs-type\">AppBar</span>(\n        title: <span class=\"hljs-type\">Text</span>(<span class=\"hljs-string\">&quot;BottomSheet学习&quot;</span>),\n      ),\n      body: <span class=\"hljs-type\">Container</span>(\n        child: <span class=\"hljs-type\">BottomSheetButton</span>(),\n      ),\n    );\n  }\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">BottomSheetButton</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>{\n  <span class=\"hljs-meta\">@override</span>\n  <span class=\"hljs-type\">Widget</span> build(<span class=\"hljs-type\">BuildContext</span> context) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">OutlinedButton</span>(\n      onPressed: () {\n        showBottomSheet(\n            context: context,\n            backgroundColor: <span class=\"hljs-type\">Colors</span>.blue.shade50,\n            elevation: <span class=\"hljs-number\">12</span>,\n            builder: (<span class=\"hljs-type\">BuildContext</span> context) {\n              <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">Container</span>(\n                height: <span class=\"hljs-number\">600</span>,\n                child: <span class=\"hljs-type\">GridView</span>.count(\n                  crossAxisCount: <span class=\"hljs-number\">4</span>,\n                  mainAxisSpacing: <span class=\"hljs-number\">12</span>,\n                  crossAxisSpacing: <span class=\"hljs-number\">12</span>,\n                  children: <span class=\"hljs-type\">List</span>.generate(\n                      <span class=\"hljs-number\">8</span>,\n                      (index) =&gt; <span class=\"hljs-type\">Container</span>(\n                            child: <span class=\"hljs-type\">Icon</span>(<span class=\"hljs-type\">Icons</span>.ac_unit),\n                            color: <span class=\"hljs-type\">Colors</span>.blue,\n                          )),\n                ),\n              );\n            });\n      },\n      child: <span class=\"hljs-type\">Text</span>(<span class=\"hljs-string\">&quot;打开BottomSheet&quot;</span>),\n    );\n  }\n}\n</code></pre>\n<blockquote>\n<p>注意：<code>showBottomSheet</code>实际调用<code>Scaffold.of(context).showBottomSheet</code>，如果在同一层级中拿不到<code>Scaffold</code>会报<code>No Scaffold widget found</code>,所以在使用时可以封装一下</p>\n</blockquote>\n<h2 id=\"showmodalbottomsheet\">showModalBottomSheet</h2>\n<blockquote>\n<p>从底部弹出一个带有遮罩的弹出层</p>\n</blockquote>\n<ul>\n<li><code>context</code>：上下文(必填)</li>\n<li><code>builder</code>：弹出层内容生成函数</li>\n<li><code>backgroundColor</code>：背景色</li>\n<li><code>elevation</code>：阴影</li>\n<li><code>barrierColor</code>：遮罩颜色</li>\n<li><code>isScrollControlled</code>：是否可滚动</li>\n<li><code>shape</code>：裁剪</li>\n</ul>\n<pre><code class=\"language-dart\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-symbol\">&#x27;package</span>:flutter/material.dart&#x27;;\n\nvoid main() {\n  runApp(<span class=\"hljs-type\">App</span>());\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">App</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>{\n  <span class=\"hljs-meta\">@override</span>\n  <span class=\"hljs-type\">Widget</span> build(<span class=\"hljs-type\">BuildContext</span> context) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">MaterialApp</span>(\n      title: <span class=\"hljs-symbol\">&#x27;BottomSheet</span>学习&#x27;,\n      home: <span class=\"hljs-type\">Home</span>(),\n    );\n  }\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Home</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>{\n  <span class=\"hljs-meta\">@override</span>\n  <span class=\"hljs-type\">Widget</span> build(<span class=\"hljs-type\">BuildContext</span> context) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">Scaffold</span>(\n      appBar: <span class=\"hljs-type\">AppBar</span>(\n        title: <span class=\"hljs-type\">Text</span>(<span class=\"hljs-string\">&quot;BottomSheet学习&quot;</span>),\n      ),\n      body: <span class=\"hljs-type\">OutlinedButton</span>(\n        child: <span class=\"hljs-type\">Text</span>(<span class=\"hljs-string\">&quot;打开BottomSheet&quot;</span>),\n        onPressed: () {\n          showModalBottomSheet(\n              context: context,\n              backgroundColor: <span class=\"hljs-type\">Colors</span>.blue.shade50,\n              elevation: <span class=\"hljs-number\">12</span>,\n              builder: (<span class=\"hljs-type\">BuildContext</span> context) {\n                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">GridView</span>.count(\n                  crossAxisCount: <span class=\"hljs-number\">4</span>,\n                  mainAxisSpacing: <span class=\"hljs-number\">12</span>,\n                  crossAxisSpacing: <span class=\"hljs-number\">12</span>,\n                  children: <span class=\"hljs-type\">List</span>.generate(\n                      <span class=\"hljs-number\">8</span>,\n                      (index) =&gt; <span class=\"hljs-type\">Container</span>(\n                            child: <span class=\"hljs-type\">Icon</span>(<span class=\"hljs-type\">Icons</span>.ac_unit),\n                            color: <span class=\"hljs-type\">Colors</span>.blue,\n                          )),\n                );\n              });\n        },\n      ),\n    );\n  }\n}\n</code></pre>\n<h2 id=\"顶部圆角-bottomsheet\">顶部圆角 BottomSheet</h2>\n<ul>\n<li>通过<code>share</code>属性来实现</li>\n<li>通过<code>backgroundColor</code>设置为<code>Colors.transparent(透明)</code>，然后设置弹出层内容的圆角来实现</li>\n</ul>\n<p><code>share实现</code></p>\n<pre><code class=\"language-dart\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-symbol\">&#x27;package</span>:flutter/material.dart&#x27;;\n\nvoid main() {\n  runApp(<span class=\"hljs-type\">App</span>());\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">App</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>{\n  <span class=\"hljs-meta\">@override</span>\n  <span class=\"hljs-type\">Widget</span> build(<span class=\"hljs-type\">BuildContext</span> context) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">MaterialApp</span>(\n      title: <span class=\"hljs-symbol\">&#x27;BottomSheet</span>学习&#x27;,\n      home: <span class=\"hljs-type\">Home</span>(),\n    );\n  }\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Home</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>{\n  <span class=\"hljs-meta\">@override</span>\n  <span class=\"hljs-type\">Widget</span> build(<span class=\"hljs-type\">BuildContext</span> context) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">Scaffold</span>(\n      appBar: <span class=\"hljs-type\">AppBar</span>(\n        title: <span class=\"hljs-type\">Text</span>(<span class=\"hljs-string\">&quot;BottomSheet学习&quot;</span>),\n      ),\n      body: <span class=\"hljs-type\">OutlinedButton</span>(\n        child: <span class=\"hljs-type\">Text</span>(<span class=\"hljs-string\">&quot;打开BottomSheet&quot;</span>),\n        onPressed: () {\n          showModalBottomSheet(\n              context: context,\n              shape: <span class=\"hljs-type\">RoundedRectangleBorder</span>(\n                  borderRadius: <span class=\"hljs-type\">BorderRadius</span>.only(\n                      topLeft: <span class=\"hljs-type\">Radius</span>.circular(<span class=\"hljs-number\">12</span>),\n                      topRight: <span class=\"hljs-type\">Radius</span>.circular(<span class=\"hljs-number\">12</span>))),\n              builder: (<span class=\"hljs-type\">BuildContext</span> context) {\n                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">Padding</span>(\n                  padding: <span class=\"hljs-type\">EdgeInsets</span>.all(<span class=\"hljs-number\">12</span>),\n                  child: <span class=\"hljs-type\">GridView</span>.count(\n                    crossAxisCount: <span class=\"hljs-number\">4</span>,\n                    mainAxisSpacing: <span class=\"hljs-number\">12</span>,\n                    crossAxisSpacing: <span class=\"hljs-number\">12</span>,\n                    children: <span class=\"hljs-type\">List</span>.generate(\n                        <span class=\"hljs-number\">8</span>,\n                        (index) =&gt; <span class=\"hljs-type\">Container</span>(\n                              child: <span class=\"hljs-type\">Icon</span>(<span class=\"hljs-type\">Icons</span>.ac_unit),\n                              color: <span class=\"hljs-type\">Colors</span>.blue,\n                            )),\n                  ),\n                );\n              });\n        },\n      ),\n    );\n  }\n}\n</code></pre>\n<p><code>backgroundColor+子部件实现</code></p>\n<pre><code class=\"language-dart\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-symbol\">&#x27;package</span>:flutter/material.dart&#x27;;\n\nvoid main() {\n  runApp(<span class=\"hljs-type\">App</span>());\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">App</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>{\n  <span class=\"hljs-meta\">@override</span>\n  <span class=\"hljs-type\">Widget</span> build(<span class=\"hljs-type\">BuildContext</span> context) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">MaterialApp</span>(\n      title: <span class=\"hljs-symbol\">&#x27;BottomSheet</span>学习&#x27;,\n      home: <span class=\"hljs-type\">Home</span>(),\n    );\n  }\n}\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Home</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>{\n  <span class=\"hljs-meta\">@override</span>\n  <span class=\"hljs-type\">Widget</span> build(<span class=\"hljs-type\">BuildContext</span> context) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">Scaffold</span>(\n      appBar: <span class=\"hljs-type\">AppBar</span>(\n        title: <span class=\"hljs-type\">Text</span>(<span class=\"hljs-string\">&quot;BottomSheet学习&quot;</span>),\n      ),\n      body: <span class=\"hljs-type\">OutlinedButton</span>(\n        child: <span class=\"hljs-type\">Text</span>(<span class=\"hljs-string\">&quot;打开BottomSheet&quot;</span>),\n        onPressed: () {\n          showModalBottomSheet(\n              context: context,\n              backgroundColor: <span class=\"hljs-type\">Colors</span>.transparent,\n              builder: (<span class=\"hljs-type\">BuildContext</span> context) {\n                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">Container</span>(\n                  padding: <span class=\"hljs-type\">EdgeInsets</span>.all(<span class=\"hljs-number\">12</span>),\n                  decoration: <span class=\"hljs-type\">BoxDecoration</span>(\n                      color: <span class=\"hljs-type\">Colors</span>.white,\n                      borderRadius: <span class=\"hljs-type\">BorderRadius</span>.only(\n                          topLeft: <span class=\"hljs-type\">Radius</span>.circular(<span class=\"hljs-number\">12</span>),\n                          topRight: <span class=\"hljs-type\">Radius</span>.circular(<span class=\"hljs-number\">12</span>))),\n                  child: <span class=\"hljs-type\">GridView</span>.count(\n                    crossAxisCount: <span class=\"hljs-number\">4</span>,\n                    mainAxisSpacing: <span class=\"hljs-number\">12</span>,\n                    crossAxisSpacing: <span class=\"hljs-number\">12</span>,\n                    children: <span class=\"hljs-type\">List</span>.generate(\n                        <span class=\"hljs-number\">8</span>,\n                        (index) =&gt; <span class=\"hljs-type\">Container</span>(\n                              child: <span class=\"hljs-type\">Icon</span>(<span class=\"hljs-type\">Icons</span>.ac_unit),\n                              color: <span class=\"hljs-type\">Colors</span>.blue,\n                            )),\n                  ),\n                );\n              });\n        },\n      ),\n    );\n  }\n}\n</code></pre>\n"}