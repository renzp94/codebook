<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#333333" />
		<link rel="stylesheet" href="/assets/styles/global.css" />
		<title>React的高级指引</title>

		

		<link rel="modulepreload" href="/./_app/start-97f7b82c.js">
		<link rel="modulepreload" href="/./_app/chunks/vendor-d00531f1.js">
		<link rel="modulepreload" href="/./_app/pages/__layout.svelte-b0488dc3.js">
		<link rel="modulepreload" href="/./_app/pages/article/__layout.svelte-9a26e2ca.js">
		<link rel="modulepreload" href="/./_app/pages/article/[category]/[id].svelte-35c0c78b.js">
		<link rel="modulepreload" href="/./_app/chunks/utils-a81d5505.js">
		<link rel="stylesheet" href="/./_app/assets/start-a8cd1609.css">
		<link rel="stylesheet" href="/./_app/assets/pages/__layout.svelte-dfbf40bb.css">
		<link rel="stylesheet" href="/./_app/assets/pages/article/__layout.svelte-1448dd73.css">
		<link rel="stylesheet" href="/./_app/assets/pages/article/[category]/[id].svelte-7f79f039.css">

		<script type="module">
			import { start } from "/./_app/start-97f7b82c.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":"/."},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/./_app/pages/__layout.svelte-b0488dc3.js"),
						import("/./_app/pages/article/__layout.svelte-9a26e2ca.js"),
						import("/./_app/pages/article/[category]/[id].svelte-35c0c78b.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "/article/react/20210728082319",
						query: new URLSearchParams(""),
						params: {"category":"react","id":"20210728082319"}
					}
				}
			});
		</script>
	</head>
	<body>
		<div id="svelte">



<section class="svelte-jbk32v"><header class="svelte-jbk32v"><a href="/"><img class="logo svelte-jbk32v" src="/assets/images/logo.png" alt="code book logo"></a>
<a class="github svelte-jbk32v" href="https://github.com/renzp94" target="_blank"><i class="iconfont icon-github svelte-jbk32v"></i></a></header>
	<main><section><main class="svelte-1fbldbu">

<section class="md"><h1 class="title">React的高级指引</h1>
  <div class="info svelte-1vg5uky"><div class="author svelte-1vg5uky">作者：renzp94</div>
    <div class="time">时间：2021-07-28 08:24:03</div></div>

  <div class="md-content"><h2 id="context">Context</h2>
<p><code>Context</code>用于多层次组件共享数据</p>
<ul>
<li><code>React.createContext</code>：创建一个<code>Context</code>对象，可接受一个参数作为默认值，当组件所处的树没有<code>Provider</code>时，<code>defaultValue</code>才会生效</li>
<li><code>Context.Provider</code>：每个<code>Context</code>对象都会返回一个<code>Provider</code>组件，它允许消费组件订阅<code>context</code>的变化，<code>Provider</code>组件接受一个<code>value</code>属性，用于传递给消费组件。多个<code>Porvider</code>嵌套使用，里层的会覆盖外层的数据</li>
<li><code>Context.Consumer</code>：订阅<code>context</code>的变更</li>
</ul>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> React, { createContext, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">interface</span> IProvider {
    <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>;
    onDec: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
    onAdd: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}
<span class="hljs-keyword">const</span> { Provider, Consumer } = createContext&lt;IProvider | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">const</span> Counter = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Consumer</span>&gt;</span>{(provider) =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{provider?.count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}<span class="hljs-tag">&lt;/<span class="hljs-name">Consumer</span>&gt;</span></span>;
};

<span class="hljs-keyword">const</span> CountButton = <span class="hljs-function">(<span class="hljs-params">props: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Consumer</span>&gt;</span>
            {(provider) =&gt; (
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{props.type</span> === <span class="hljs-string">&#x27;dec&#x27;</span> ? <span class="hljs-attr">provider</span>?<span class="hljs-attr">.onDec</span> <span class="hljs-attr">:</span> <span class="hljs-attr">provider</span>?<span class="hljs-attr">.onAdd</span>}&gt;</span>
                    {props.children}
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">Consumer</span>&gt;</span></span>
    );
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">const</span> provider = {
        count,
        <span class="hljs-attr">onDec</span>: <span class="hljs-function">() =&gt;</span> setCount(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count - <span class="hljs-number">1</span>),
        <span class="hljs-attr">onAdd</span>: <span class="hljs-function">() =&gt;</span> setCount(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count + <span class="hljs-number">1</span>)
    };

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{provider}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">CountButton</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;dec&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">CountButton</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">CountButton</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">CountButton</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>
    );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
<blockquote>
<p>简单理解：通过<code>createContext</code>创建一个<code>Context</code>对象，<code>Context</code>对象包含两个组件：<code>Porvider</code>和<code>Consumer</code>。<code>Provider</code>接收一个<code>value</code>属性用于设置共享的数据，将<code>Provider</code>包裹需要共享的组件。<code>Consumer</code>组件是用来获取共享数据的，通过<code>Consumer</code>包裹一个函数，函数第一个参数就是共享的数据，函数返回一个渲染内容。</p>
</blockquote>
<h3 id="contextcontexttype">Context.contextType</h3>
<blockquote>
<p>当需要使用共享数据时需要使用<code>Consumer</code>组件包裹，也可通过<code>Context.contextType</code>直接使用共享数据，这样就可以不使用<code>Consumer</code>组件了。<code>Context.contextType</code>只适用<code>class</code>形式的组件且只适用单一<code>Context</code></p>
</blockquote>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-type">React</span>, { <span class="hljs-type">Component</span>, createContext } from <span class="hljs-symbol">&#x27;reac</span>t&#x27;;

interface <span class="hljs-type">IProvider</span> {
    count: number;
    onDec: () =&gt; void;
    onAdd: () =&gt; void;
}
const context = createContext&lt;<span class="hljs-type">IProvider</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    <span class="hljs-comment">// static contextType = context</span>

    render() {
        <span class="hljs-keyword">return</span> &lt;span&gt;{<span class="hljs-keyword">this</span>.context.count}&lt;/span&gt;;
    }
}

<span class="hljs-type">Counter</span>.contextType = context;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CounterButton</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    <span class="hljs-comment">// static contextType = context</span>

    render() {
        <span class="hljs-keyword">return</span> (
            &lt;button onClick={<span class="hljs-keyword">this</span>.props.<span class="hljs-keyword">type</span> === <span class="hljs-symbol">&#x27;de</span>c&#x27; ? <span class="hljs-keyword">this</span>.context.onDec : <span class="hljs-keyword">this</span>.context.onAdd}&gt;
                {<span class="hljs-keyword">this</span>.props.children}
            &lt;/button&gt;
        );
    }
}

<span class="hljs-type">CounterButton</span>.contextType = context;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    constructor(props: any) {
        <span class="hljs-keyword">super</span>(props);
        <span class="hljs-keyword">this</span>.state = { count: <span class="hljs-number">0</span> };
    }

    onDec = () =&gt; <span class="hljs-keyword">this</span>.setState((state) =&gt; ({ count: state.count - <span class="hljs-number">1</span> }));
    onAdd = () =&gt; <span class="hljs-keyword">this</span>.setState((state) =&gt; ({ count: state.count + <span class="hljs-number">1</span> }));

    render() {
        const provider: <span class="hljs-type">IProvider</span> = {
            count: <span class="hljs-keyword">this</span>.state.count,
            onDec: <span class="hljs-keyword">this</span>.onDec,
            onAdd: <span class="hljs-keyword">this</span>.onAdd
        };

        <span class="hljs-keyword">return</span> (
            &lt;context.<span class="hljs-type">Provider</span> value={provider}&gt;
                &lt;<span class="hljs-type">CounterButton</span> <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">&quot;dec&quot;</span>&gt;-&lt;/<span class="hljs-type">CounterButton</span>&gt;
                &lt;<span class="hljs-type">Counter</span> /&gt;
                &lt;<span class="hljs-type">CounterButton</span> <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">&quot;add&quot;</span>&gt;+&lt;/<span class="hljs-type">CounterButton</span>&gt;
            &lt;/context.<span class="hljs-type">Provider</span>&gt;
        );
    }
}

export <span class="hljs-keyword">default</span> <span class="hljs-type">App</span>;
</code></pre>
<blockquote>
<p>通过<code>class.contextType</code>指定<code>Context</code>对象，或者使用<code>static contextType</code>指定，注意：<code>static contextType</code>是实验性的<code>public class fields 语法</code></p>
</blockquote>
<h3 id="contextdisplayname">Context.displayName</h3>
<blockquote>
<p>此属性是用于指定<code>React DevTools</code>显示的内容</p>
</blockquote>
<h3 id="refs-转发">Refs 转发</h3>
<blockquote>
<p>通过<code>ref</code>可以访问<code>DOM</code>元素，但对于组件来说，组件指定的<code>ref</code>参数不能指定到某个内部元素，如果需要通过<code>ref</code>转发，即：通过<code>React.forwardRef</code>包装一下</p>
</blockquote>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> React, { forwardRef, useEffect, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">const</span> Counter = forwardRef(<span class="hljs-function">(<span class="hljs-params">_, ref</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount((count) =&gt; count - 1)}&gt;-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount((count) =&gt; count + 1)}&gt;+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/&gt;</span></span>
    );
});

<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> ref = useRef(<span class="hljs-literal">null</span>);
    useEffect(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(ref), []);

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> /&gt;</span></span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
<blockquote>
<p>当用在高阶组件时，可将<code>ref</code>通过一个属性，如：<code>forwardedRef</code>来传递到高阶组件内，然后通过<code>forwardedRef</code>再指定到实际的组件上</p>
</blockquote>
<h2 id="fragments">Fragments</h2>
<blockquote>
<p>在<code>React</code>中组件比如由一个根元素包裹，有时并不需要根元素包裹，想返回多个元素时，可以通过<code>React.Fragments</code>包裹，在渲染时不会渲染，短语法为<code>&lt;&gt;&lt;/&gt;</code></p>
</blockquote>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> React, { Fragment } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// return (</span>
    <span class="hljs-comment">//   &lt;Fragment&gt;</span>
    <span class="hljs-comment">//     &lt;div&gt;1&lt;/div&gt;</span>
    <span class="hljs-comment">//     &lt;div&gt;2&lt;/div&gt;</span>
    <span class="hljs-comment">//   &lt;/Fragment&gt;</span>
    <span class="hljs-comment">// )</span>

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/&gt;</span></span>
    );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
<h2 id="高阶组件">高阶组件</h2>
<p>接受一个组件，返回一个新的组件便称这个组件是<code>高阶组件</code>。</p>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> React, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">const</span> Counter = <span class="hljs-function">(<span class="hljs-params">Component: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> onDec = <span class="hljs-function">() =&gt;</span> setCount(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count - <span class="hljs-number">1</span>);
    <span class="hljs-keyword">const</span> onAdd = <span class="hljs-function">() =&gt;</span> setCount(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count + <span class="hljs-number">1</span>);

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onDec}</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Component</span> <span class="hljs-attr">count</span>=<span class="hljs-string">{count}</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onAdd}</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/&gt;</span></span>
    );
};

<span class="hljs-keyword">const</span> CounterInfo = <span class="hljs-function">(<span class="hljs-params">props: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{props.count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
};

<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> Counter(CounterInfo);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
</div>
</section></main>
</section></main>
	
<div class="back-top svelte-9c9s8u" style="bottom: 5rem;right: 0.625rem;display: none"><i class="iconfont icon-back-top"></i>
</div>
</section>



	<script type="svelte-data" url="20210728082319.json">{"status":200,"statusText":"","headers":{"content-type":"text/plain;charset=UTF-8"},"body":"{\"title\":\"React的高级指引\",\"slug\":\"react\",\"time\":\"2021-07-28T08:24:03.000Z\",\"author\":\"renzp94\",\"status\":\"done\",\"html\":\"\u003Ch2 id=\\\"context\\\"\u003EContext\u003C\u002Fh2\u003E\\n\u003Cp\u003E\u003Ccode\u003EContext\u003C\u002Fcode\u003E用于多层次组件共享数据\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\u003Ccode\u003EReact.createContext\u003C\u002Fcode\u003E：创建一个\u003Ccode\u003EContext\u003C\u002Fcode\u003E对象，可接受一个参数作为默认值，当组件所处的树没有\u003Ccode\u003EProvider\u003C\u002Fcode\u003E时，\u003Ccode\u003EdefaultValue\u003C\u002Fcode\u003E才会生效\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ccode\u003EContext.Provider\u003C\u002Fcode\u003E：每个\u003Ccode\u003EContext\u003C\u002Fcode\u003E对象都会返回一个\u003Ccode\u003EProvider\u003C\u002Fcode\u003E组件，它允许消费组件订阅\u003Ccode\u003Econtext\u003C\u002Fcode\u003E的变化，\u003Ccode\u003EProvider\u003C\u002Fcode\u003E组件接受一个\u003Ccode\u003Evalue\u003C\u002Fcode\u003E属性，用于传递给消费组件。多个\u003Ccode\u003EPorvider\u003C\u002Fcode\u003E嵌套使用，里层的会覆盖外层的数据\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ccode\u003EContext.Consumer\u003C\u002Fcode\u003E：订阅\u003Ccode\u003Econtext\u003C\u002Fcode\u003E的变更\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-tsx\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E React, { createContext, useState } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;react&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Einterface\u003C\u002Fspan\u003E IProvider {\\n    \u003Cspan class=\\\"hljs-attr\\\"\u003Ecount\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-built_in\\\"\u003Enumber\u003C\u002Fspan\u003E;\\n    onDec: \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-built_in\\\"\u003Evoid\u003C\u002Fspan\u003E;\\n    onAdd: \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-built_in\\\"\u003Evoid\u003C\u002Fspan\u003E;\\n}\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E { Provider, Consumer } = createContext&lt;IProvider | \u003Cspan class=\\\"hljs-literal\\\"\u003Enull\u003C\u002Fspan\u003E&gt;(\u003Cspan class=\\\"hljs-literal\\\"\u003Enull\u003C\u002Fspan\u003E);\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E Counter = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003EConsumer\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{(provider) =&gt; \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{provider?.count}\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E}\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003EConsumer\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E;\\n};\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E CountButton = \u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003Eprops: \u003Cspan class=\\\"hljs-built_in\\\"\u003Eany\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E (\\n        \u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003EConsumer\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n            {(provider) =&gt; (\\n                \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003EonClick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E{props.type\u003C\u002Fspan\u003E === \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;dec&#x27;\u003C\u002Fspan\u003E ? \u003Cspan class=\\\"hljs-attr\\\"\u003Eprovider\u003C\u002Fspan\u003E?\u003Cspan class=\\\"hljs-attr\\\"\u003E.onDec\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eprovider\u003C\u002Fspan\u003E?\u003Cspan class=\\\"hljs-attr\\\"\u003E.onAdd\u003C\u002Fspan\u003E}&gt;\u003C\u002Fspan\u003E\\n                    {props.children}\\n                \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n            )}\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003EConsumer\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n    );\\n};\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EApp\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E [count, setCount] = useState(\u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E);\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E provider = {\\n        count,\\n        \u003Cspan class=\\\"hljs-attr\\\"\u003EonDec\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E setCount(\u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003Ecount\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E count - \u003Cspan class=\\\"hljs-number\\\"\u003E1\u003C\u002Fspan\u003E),\\n        \u003Cspan class=\\\"hljs-attr\\\"\u003EonAdd\u003C\u002Fspan\u003E: \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E setCount(\u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003Ecount\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E count + \u003Cspan class=\\\"hljs-number\\\"\u003E1\u003C\u002Fspan\u003E)\\n    };\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E (\\n        \u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003EProvider\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Evalue\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E{provider}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003ECountButton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Etype\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;dec&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E-\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003ECountButton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003ECounter\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003ECountButton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Etype\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;add&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E+\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003ECountButton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003EProvider\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n    );\\n}\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Edefault\u003C\u002Fspan\u003E App;\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E简单理解：通过\u003Ccode\u003EcreateContext\u003C\u002Fcode\u003E创建一个\u003Ccode\u003EContext\u003C\u002Fcode\u003E对象，\u003Ccode\u003EContext\u003C\u002Fcode\u003E对象包含两个组件：\u003Ccode\u003EPorvider\u003C\u002Fcode\u003E和\u003Ccode\u003EConsumer\u003C\u002Fcode\u003E。\u003Ccode\u003EProvider\u003C\u002Fcode\u003E接收一个\u003Ccode\u003Evalue\u003C\u002Fcode\u003E属性用于设置共享的数据，将\u003Ccode\u003EProvider\u003C\u002Fcode\u003E包裹需要共享的组件。\u003Ccode\u003EConsumer\u003C\u002Fcode\u003E组件是用来获取共享数据的，通过\u003Ccode\u003EConsumer\u003C\u002Fcode\u003E包裹一个函数，函数第一个参数就是共享的数据，函数返回一个渲染内容。\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Ch3 id=\\\"contextcontexttype\\\"\u003EContext.contextType\u003C\u002Fh3\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E当需要使用共享数据时需要使用\u003Ccode\u003EConsumer\u003C\u002Fcode\u003E组件包裹，也可通过\u003Ccode\u003EContext.contextType\u003C\u002Fcode\u003E直接使用共享数据，这样就可以不使用\u003Ccode\u003EConsumer\u003C\u002Fcode\u003E组件了。\u003Ccode\u003EContext.contextType\u003C\u002Fcode\u003E只适用\u003Ccode\u003Eclass\u003C\u002Fcode\u003E形式的组件且只适用单一\u003Ccode\u003EContext\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-tsx\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-type\\\"\u003EReact\u003C\u002Fspan\u003E, { \u003Cspan class=\\\"hljs-type\\\"\u003EComponent\u003C\u002Fspan\u003E, createContext } from \u003Cspan class=\\\"hljs-symbol\\\"\u003E&#x27;reac\u003C\u002Fspan\u003Et&#x27;;\\n\\ninterface \u003Cspan class=\\\"hljs-type\\\"\u003EIProvider\u003C\u002Fspan\u003E {\\n    count: number;\\n    onDec: () =&gt; void;\\n    onAdd: () =&gt; void;\\n}\\nconst context = createContext&lt;\u003Cspan class=\\\"hljs-type\\\"\u003EIProvider\u003C\u002Fspan\u003E | \u003Cspan class=\\\"hljs-literal\\\"\u003Enull\u003C\u002Fspan\u003E&gt;(\u003Cspan class=\\\"hljs-literal\\\"\u003Enull\u003C\u002Fspan\u003E);\\n\\n\u003Cspan class=\\\"hljs-class\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003ECounter\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Eextends\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EComponent\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\\n    \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F static contextType = context\u003C\u002Fspan\u003E\\n\\n    render() {\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E &lt;span&gt;{\u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.context.count}&lt;\u002Fspan&gt;;\\n    }\\n}\\n\\n\u003Cspan class=\\\"hljs-type\\\"\u003ECounter\u003C\u002Fspan\u003E.contextType = context;\\n\\n\u003Cspan class=\\\"hljs-class\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003ECounterButton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Eextends\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EComponent\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\\n    \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F static contextType = context\u003C\u002Fspan\u003E\\n\\n    render() {\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E (\\n            &lt;button onClick={\u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.props.\u003Cspan class=\\\"hljs-keyword\\\"\u003Etype\u003C\u002Fspan\u003E === \u003Cspan class=\\\"hljs-symbol\\\"\u003E&#x27;de\u003C\u002Fspan\u003Ec&#x27; ? \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.context.onDec : \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.context.onAdd}&gt;\\n                {\u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.props.children}\\n            &lt;\u002Fbutton&gt;\\n        );\\n    }\\n}\\n\\n\u003Cspan class=\\\"hljs-type\\\"\u003ECounterButton\u003C\u002Fspan\u003E.contextType = context;\\n\\n\u003Cspan class=\\\"hljs-class\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EApp\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Eextends\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EComponent\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\\n    constructor(props: any) {\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Esuper\u003C\u002Fspan\u003E(props);\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.state = { count: \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E };\\n    }\\n\\n    onDec = () =&gt; \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.setState((state) =&gt; ({ count: state.count - \u003Cspan class=\\\"hljs-number\\\"\u003E1\u003C\u002Fspan\u003E }));\\n    onAdd = () =&gt; \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.setState((state) =&gt; ({ count: state.count + \u003Cspan class=\\\"hljs-number\\\"\u003E1\u003C\u002Fspan\u003E }));\\n\\n    render() {\\n        const provider: \u003Cspan class=\\\"hljs-type\\\"\u003EIProvider\u003C\u002Fspan\u003E = {\\n            count: \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.state.count,\\n            onDec: \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.onDec,\\n            onAdd: \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethis\u003C\u002Fspan\u003E.onAdd\\n        };\\n\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E (\\n            &lt;context.\u003Cspan class=\\\"hljs-type\\\"\u003EProvider\u003C\u002Fspan\u003E value={provider}&gt;\\n                &lt;\u003Cspan class=\\\"hljs-type\\\"\u003ECounterButton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-class\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Etype\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;dec&quot;\u003C\u002Fspan\u003E&gt;-&lt;\u002F\u003Cspan class=\\\"hljs-type\\\"\u003ECounterButton\u003C\u002Fspan\u003E&gt;\\n                &lt;\u003Cspan class=\\\"hljs-type\\\"\u003ECounter\u003C\u002Fspan\u003E \u002F&gt;\\n                &lt;\u003Cspan class=\\\"hljs-type\\\"\u003ECounterButton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-class\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Etype\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;add&quot;\u003C\u002Fspan\u003E&gt;+&lt;\u002F\u003Cspan class=\\\"hljs-type\\\"\u003ECounterButton\u003C\u002Fspan\u003E&gt;\\n            &lt;\u002Fcontext.\u003Cspan class=\\\"hljs-type\\\"\u003EProvider\u003C\u002Fspan\u003E&gt;\\n        );\\n    }\\n}\\n\\nexport \u003Cspan class=\\\"hljs-keyword\\\"\u003Edefault\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-type\\\"\u003EApp\u003C\u002Fspan\u003E;\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E通过\u003Ccode\u003Eclass.contextType\u003C\u002Fcode\u003E指定\u003Ccode\u003EContext\u003C\u002Fcode\u003E对象，或者使用\u003Ccode\u003Estatic contextType\u003C\u002Fcode\u003E指定，注意：\u003Ccode\u003Estatic contextType\u003C\u002Fcode\u003E是实验性的\u003Ccode\u003Epublic class fields 语法\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Ch3 id=\\\"contextdisplayname\\\"\u003EContext.displayName\u003C\u002Fh3\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E此属性是用于指定\u003Ccode\u003EReact DevTools\u003C\u002Fcode\u003E显示的内容\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Ch3 id=\\\"refs-转发\\\"\u003ERefs 转发\u003C\u002Fh3\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E通过\u003Ccode\u003Eref\u003C\u002Fcode\u003E可以访问\u003Ccode\u003EDOM\u003C\u002Fcode\u003E元素，但对于组件来说，组件指定的\u003Ccode\u003Eref\u003C\u002Fcode\u003E参数不能指定到某个内部元素，如果需要通过\u003Ccode\u003Eref\u003C\u002Fcode\u003E转发，即：通过\u003Ccode\u003EReact.forwardRef\u003C\u002Fcode\u003E包装一下\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-tsx\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E React, { forwardRef, useEffect, useRef, useState } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;react&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E Counter = forwardRef(\u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003E_, ref\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E [count, setCount] = useState(\u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E);\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E (\\n        \u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003EonClick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E{()\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E setCount((count) =&gt; count - 1)}&gt;-\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eref\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E{ref}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{count}\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003EonClick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E{()\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E setCount((count) =&gt; count + 1)}&gt;+\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n    );\\n});\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E App = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E ref = useRef(\u003Cspan class=\\\"hljs-literal\\\"\u003Enull\u003C\u002Fspan\u003E);\\n    useEffect(\u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-built_in\\\"\u003Econsole\u003C\u002Fspan\u003E.log(ref), []);\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003ECounter\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eref\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E{ref}\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E;\\n};\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Edefault\u003C\u002Fspan\u003E App;\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E当用在高阶组件时，可将\u003Ccode\u003Eref\u003C\u002Fcode\u003E通过一个属性，如：\u003Ccode\u003EforwardedRef\u003C\u002Fcode\u003E来传递到高阶组件内，然后通过\u003Ccode\u003EforwardedRef\u003C\u002Fcode\u003E再指定到实际的组件上\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Ch2 id=\\\"fragments\\\"\u003EFragments\u003C\u002Fh2\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003E在\u003Ccode\u003EReact\u003C\u002Fcode\u003E中组件比如由一个根元素包裹，有时并不需要根元素包裹，想返回多个元素时，可以通过\u003Ccode\u003EReact.Fragments\u003C\u002Fcode\u003E包裹，在渲染时不会渲染，短语法为\u003Ccode\u003E&lt;&gt;&lt;\u002F&gt;\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-tsx\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E React, { Fragment } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;react&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E App = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F return (\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F   &lt;Fragment&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F     &lt;div&gt;1&lt;\u002Fdiv&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F     &lt;div&gt;2&lt;\u002Fdiv&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F   &lt;\u002FFragment&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F )\u003C\u002Fspan\u003E\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E (\\n        \u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E1\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E2\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n    );\\n};\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Edefault\u003C\u002Fspan\u003E App;\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Ch2 id=\\\"高阶组件\\\"\u003E高阶组件\u003C\u002Fh2\u003E\\n\u003Cp\u003E接受一个组件，返回一个新的组件便称这个组件是\u003Ccode\u003E高阶组件\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-tsx\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eimport\u003C\u002Fspan\u003E React, { useState } \u003Cspan class=\\\"hljs-keyword\\\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&#x27;react&#x27;\u003C\u002Fspan\u003E;\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E Counter = \u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003EComponent: \u003Cspan class=\\\"hljs-built_in\\\"\u003Eany\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E [count, setCount] = useState(\u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E);\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onDec = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E setCount(\u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003Ecount\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E count - \u003Cspan class=\\\"hljs-number\\\"\u003E1\u003C\u002Fspan\u003E);\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E onAdd = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E setCount(\u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003Ecount\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E count + \u003Cspan class=\\\"hljs-number\\\"\u003E1\u003C\u002Fspan\u003E);\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E (\\n        \u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003EonClick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E{onDec}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E-\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003EComponent\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Ecount\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E{count}\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003EonClick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E{onAdd}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E+\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n    );\\n};\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E CounterInfo = \u003Cspan class=\\\"hljs-function\\\"\u003E(\u003Cspan class=\\\"hljs-params\\\"\u003Eprops: \u003Cspan class=\\\"hljs-built_in\\\"\u003Eany\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{props.count}\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E;\\n};\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Econst\u003C\u002Fspan\u003E App = \u003Cspan class=\\\"hljs-function\\\"\u003E() =&gt;\u003C\u002Fspan\u003E Counter(CounterInfo);\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Edefault\u003C\u002Fspan\u003E App;\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\"}"}</script>
</div>
	</body>
</html>
